## $Id$
##
## (c) Copyright, Real-Time Innovations, Inc. 2001.  All rights reserved.
## No duplications, whole or partial, manual or electronic, may be made
## without prior written permission.  Any such copies, or
## revisions thereof, must display this notice unaltered.
## This code contains trade secrets of Real-Time Innovations, Inc.
##
## modification history:
## ---------------------
## 2.3,13may15,gpc Added setting of NDDSHOME if undefined in environment
## 2.2,11sep14,vmg created
##========================================================================
<?xml version="1.0"?>
<!--
 build.xml

 (c) Copyright, Real-Time Innovations, 2012.  All rights reserved.
 No duplications, whole or partial, manual or electronic, may be made
 without express written permission.  Any such copies, or
 revisions thereof, must display this notice unaltered.
 This code contains trade secrets of Real-Time Innovations, Inc.


 This ant file was automatically generated by rtiddsgen.

 To build, type:
 	ant
 	
 To run subscriber, type:
 	ant ${exampleType}Subscriber
 	
 To run publisher, type:
 	ant ${exampleType}Publisher
 	
 Note: This ant file is only meant to build our example applications and
       may require alterations to build on your system.
-->
<project name="${exampleType} Example" default="compile" basedir=".">
	<!-- Set properties -->
	<property environment="env"/>

	<!-- Ant Properties are immutable. If NDDSHOME is already set this is a NOOP -->
	<property name="env.NDDSHOME" value="${global.nddsHome}"/>
	
	<!-- Set Build Path -->
	<path id="build.classpath.release">
		<fileset dir="#[[$]]#{env.NDDSHOME}/lib/java" includes="**/nddsjava.jar" />
	</path>
	
	<path id="build.classpath.debug">
		<fileset dir="#[[$]]#{env.NDDSHOME}/lib/java" includes="**/nddsjavad.jar" />
	</path>
  
	<!-- Deletes the existing build -->
	<target name="clean">
		<delete>
			<fileset dir="." includes="**/*.class" />
		</delete>
	</target>

	<!-- Build examples -->
	<target name="compile">
		<javac srcdir="." destdir="." includeantruntime="false" classpathref="build.classpath.release" />
		<jar destfile="${exampleType}Example.jar"
			basedir="."
			includes="**/*.class">
		</jar>
	</target>
	
	<target name="compile-debug">
		<javac srcdir="." destdir="." includeantruntime="false" classpathref="build.classpath.debug" debug="on"/>
		<jar destfile="${exampleType}Example-debug.jar"
			basedir="."
			includes="**/*.class">
		</jar>
	</target>
	
	<!-- Run release subscriber -->
	<target name="${exampleType}Subscriber" depends="compile">
		<java fork="true" failonerror="yes" classpathref="build.classpath.release" classpath="${exampleType}Example.jar" classname="${exampleTypeClassPackage}Subscriber">
			<env key="${pathVariable}" path="#[[$]]#{env.${pathVariable}};#[[$]]#{env.NDDSHOME}/lib/${global.architectureName}"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	
	<!-- Run release publisher -->
	<target name="${exampleType}Publisher" depends="compile">
		<java fork="true" failonerror="yes" classpathref="build.classpath.release" classpath="${exampleType}Example.jar" classname="${exampleTypeClassPackage}Publisher">
			<env key="${pathVariable}" path="#[[$]]#{env.${pathVariable}};#[[$]]#{env.NDDSHOME}/lib/${global.architectureName}"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	
	<!-- Run debug subscriber -->
	<target name="${exampleType}Subscriber-debug" depends="compile-debug">
		<java fork="true" failonerror="yes" classpathref="build.classpath.debug" classpath="${exampleType}Example-debug.jar" classname="${exampleTypeClassPackage}Subscriber">
			<env key="${pathVariable}" path="#[[$]]#{env.${pathVariable}};#[[$]]#{env.NDDSHOME}/lib/${global.architectureName}"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	
	<!-- Run debug publisher -->
	<target name="${exampleType}Publisher-debug" depends="compile-debug">
		<java fork="true" failonerror="yes" classpathref="build.classpath.debug" classpath="${exampleType}Example-debug.jar" classname="${exampleTypeClassPackage}Publisher">
			<env key="${pathVariable}" path="#[[$]]#{env.${pathVariable}};#[[$]]#{env.NDDSHOME}/lib/${global.architectureName}"/>
			<arg value="0" description="Domain"/>
			<arg value="0" description="Max loop count"/>
		</java>
	</target>
	
</project>