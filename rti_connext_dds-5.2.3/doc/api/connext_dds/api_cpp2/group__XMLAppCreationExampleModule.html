<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RTI Connext Modern C++ API: XML Application Creation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RTI Connext Modern C++ API
   &#160;<span id="projectnumber">Version 5.2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2-20120808 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__XMLAppCreationExampleModule.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">XML Application Creation</div>  </div>
<div class="ingroups"><a class="el" href="group__DDSHowToModule.html">Programming How-To's</a></div></div><!--header-->
<div class="contents">

<p>Creating a custom content filter.  
<a href="#details">More...</a></p>
<p>Creating a custom content filter. </p>
<h1><a class="anchor" id="XMLAppCreationExampleModule_intro"></a>
Introduction</h1>
<p>XML-Based Application Creation is a mechanism to simplify the development and programming of RTI Connext applications. RTI Connext supports the use of XML for the complete system definition. This includes not only the definition of the data types and Quality of Service settings, but also the definition of the Topics, DomainParticipants, and all the Entities they contain (Publishers, Subscribers, DataWriters and DataReaders).</p>
<p>The application code simply indicates the participant configuration name of the DomainParticipant that the application wants to create. The XML-Based Application Creation infrastructure takes care of the rest: creating the DomainParticipant, registering the types and Topics, and populating all the configured Entities. When the application needs to read or write data, register listeners, or perform any other action, it simply looks up the appropriate Entity by name and uses it.</p>
<p>See the RTI_ConnextDDS_CoreLibraries_XML_AppCreation_GettingStarted.pdf for a more exhaustive description XML Application Creation, most notably, how to set up the XML Configuration files.</p>
<p>The example on this page shows a basic use of the APIs that are necessary in order to access the entities that have been created in an XML file.</p>
<p>Relevant functions that enable the use of XML Application Creation are:</p>
<ul>
<li><a class="el" href="classdds_1_1core_1_1QosProvider.html#a1fd9f2ef91347c496b31780b1b1fc51f" title="&lt;&lt;extension&gt;&gt; Creates a dds::domain::DomainParticipant given its configuration name from a descriptio...">dds::core::QosProvider::create_participant_from_config</a></li>
<li><a class="el" href="namespacerti_1_1domain.html#adf0e25181d3ffa41f0e7ac5b5b9e5a76" title="&lt;&lt;extension&gt;&gt; Locates an existing dds::domain::DomainParticipant by name.">rti::domain::find_participant_by_name</a></li>
<li><a class="el" href="namespacerti_1_1sub.html#ab0fe24a4ac06247c4cb906dddeac85c0" title="&lt;&lt;extension&gt;&gt; Finds a Subscriber by name">rti::sub::find_subscriber(const dds::domain::DomainParticipant participant,const std::string&amp; subscriber_name)</a>;</li>
<li><a class="el" href="namespacerti_1_1sub.html#a36ab421210a1976f70870660b3bf573a" title="&lt;&lt;extension&gt;&gt; Retrieves a dds::sub::DataReader with the given name within the dds::sub::Subscriber">rti::sub::find_datareader_by_name(dds::sub::Subscriber subscriber, const std::string&amp; datareader_name)</a></li>
<li><a class="el" href="namespacerti_1_1sub.html#a1848f7c8b303afcf722dc6d057d94c41" title="&lt;&lt;extension&gt;&gt; Retrieves a dds::sub::DataReader within the dds::domain::DomainParticipant with the giv...">rti::sub::find_datareader_by_name(dds::domain::DomainParticipant participant, const std::string&amp; datareader_name)</a></li>
<li><a class="el" href="namespacerti_1_1pub.html#a0d482ca119d184c52bc94b6f0b0ee1b5" title="&lt;&lt;extension&gt;&gt; Looks up a dds::pub::Publisher by its entity name within the dds::domain::DomainPartici...">rti::pub::find_publisher(const dds::domain::DomainParticipant participant,const std::string&amp; publisher_name)</a>;</li>
<li><a class="el" href="namespacerti_1_1pub.html#a7aca151d7ab0ee0e354ef8d84cde6dad" title="&lt;&lt;extension&gt;&gt; Retrieves a dds::pub::DataWriter with the given name within the dds::pub::Publisher">rti::pub::find_datawriter_by_name(dds::pub::Publisher publisher, const std::string&amp; datawriter_name)</a></li>
<li><a class="el" href="namespacerti_1_1pub.html#a169cd147b53a6ecf3de7d284e461b6fa" title="&lt;&lt;extension&gt;&gt; Retrieves a dds::pub::DataWriter within the dds::domain::DomainParticipant with the giv...">rti::pub::find_datawriter_by_name(dds::domain::DomainParticipant participant, const std::string&amp; datawriter_name)</a></li>
</ul>
<h1><a class="anchor" id="XMLAppCreationExampleModule_example_setup"></a>
Setting up this Example</h1>
<p>The following #includes are needed for the examples on this page </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dds/core/QosProvider.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dds/sub/DataReader.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dds/sub/find.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dds/pub/DataWriter.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dds/pub/find.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Foo.hpp&quot;</span></div>
</div><!-- fragment --><p> The following is the configuration that we will be using in this example: </p>
<div class="fragment"><div class="line">&lt;dds&gt;</div>
<div class="line">    &lt;types&gt;</div>
<div class="line">         &lt;<span class="keyword">struct </span><a class="code" href="classdds_1_1topic_1_1Filter.html#a1d89c28bd42ba9a52da008bb69367171" title="&lt;&lt;extension&gt;&gt; Gets the filter name">name</a>=<span class="stringliteral">&quot;Foo&quot;</span>&gt;</div>
<div class="line">             &lt;member <a class="code" href="classdds_1_1topic_1_1Filter.html#a1d89c28bd42ba9a52da008bb69367171" title="&lt;&lt;extension&gt;&gt; Gets the filter name">name</a>=<span class="stringliteral">&quot;x&quot;</span> <a class="code" href="classdds_1_1topic_1_1PublicationBuiltinTopicData.html#aa4af5c32e3bc413bd263b709c367631d" title="&lt;&lt;extension&gt;&gt; Get the type">type</a>=<span class="stringliteral">&quot;long&quot;</span>/&gt;</div>
<div class="line">          &lt;/<span class="keyword">struct</span>&gt;</div>
<div class="line">    &lt;/types&gt;</div>
<div class="line">    &lt;domain_library name=<span class="stringliteral">&quot;ExampleDomainLibrary&quot;</span> &gt;</div>
<div class="line">        &lt;domain name=<span class="stringliteral">&quot;ExampleDomain&quot;</span> domain_id=<span class="stringliteral">&quot;0&quot;</span>&gt;</div>
<div class="line">         &lt;<a class="code" href="classdds_1_1domain_1_1DomainParticipant.html#a316aeaa19a99617d359af80827b2ea5a" title="&lt;&lt;extension&gt;&gt; Registers a DynamicType with specific serialization properties">register_type</a> name=<span class="stringliteral">&quot;Foo&quot;</span> kind =<span class="stringliteral">&quot;userGenerated&quot;</span>/&gt;</div>
<div class="line">         &lt;topic name=<span class="stringliteral">&quot;ExampleTopic&quot;</span> register_type_ref=<span class="stringliteral">&quot;Foo&quot;</span>/&gt;</div>
<div class="line">        &lt;/domain&gt;</div>
<div class="line">    &lt;/domain_library&gt;</div>
<div class="line">    &lt;participant_library name=<span class="stringliteral">&quot;ExampleParticipantLibrary&quot;</span>&gt;</div>
<div class="line">        &lt;domain_participant name=<span class="stringliteral">&quot;ExamplePublicationParticipant&quot;</span> domain_ref=<span class="stringliteral">&quot;ExampleDomainLibrary::ExampleDomain&quot;</span>&gt;</div>
<div class="line">            &lt;publisher name=<span class="stringliteral">&quot;ExamplePublisher&quot;</span>&gt;</div>
<div class="line">                &lt;data_writer name=<span class="stringliteral">&quot;ExampleWriter&quot;</span> topic_ref=<span class="stringliteral">&quot;ExampleTopic&quot;</span>/&gt;</div>
<div class="line">            &lt;/publisher&gt;</div>
<div class="line">        &lt;/domain_participant&gt;</div>
<div class="line">         &lt;domain_participant name=<span class="stringliteral">&quot;ExampleSubscriptionParticipant&quot;</span> domain_ref=<span class="stringliteral">&quot;ExampleDomainLibrary::ExampleDomain&quot;</span>&gt;   </div>
<div class="line">             &lt;data_reader name=<span class="stringliteral">&quot;ExampleReader&quot;</span> topic_ref=<span class="stringliteral">&quot;ExampleTopic&quot;</span>&gt;</div>
<div class="line">                &lt;<a class="code" href="classdds_1_1topic_1_1ContentFilteredTopic.html#a6a3754a544208f07b6667e0f96bb0462" title="&lt;&lt;extension&gt;&gt; Modifies the filter">filter</a> name=<span class="stringliteral">&quot;ExampleTopic&quot;</span> kind=<span class="stringliteral">&quot;builtin.sql&quot;</span>&gt; </div>
<div class="line">                    &lt;expression&gt; foo &gt; 5 &lt;/expression&gt;</div>
<div class="line">                &lt;/<a class="code" href="classdds_1_1topic_1_1ContentFilteredTopic.html#a6a3754a544208f07b6667e0f96bb0462" title="&lt;&lt;extension&gt;&gt; Modifies the filter">filter</a>&gt;</div>
<div class="line">            &lt;/data_reader&gt;</div>
<div class="line">        &lt;/domain_participant&gt;</div>
<div class="line">    &lt;/participant_library&gt;</div>
<div class="line">&lt;/dds&gt;</div>
</div><!-- fragment --><h2><a class="anchor" id="XMLAppCreationExampleModule_example"></a>
Using XML Application Creation</h2>
<p>You must first make sure that your configuration file is loaded by RTI Connext by using the QosProvider: </p>
<div class="fragment"><div class="line">    <a class="code" href="classrti_1_1core_1_1QosProviderParams.html" title="&lt;&lt;extension&gt;&gt; &lt;&lt;value-type&gt;&gt; Configure options that control the way that XML documents containing QoS...">rti::core::QosProviderParams</a> <a class="code" href="classdds_1_1core_1_1QosProvider.html#a99f3c43a729ba9276904cebff99fbc6c" title="&lt;&lt;extension&gt;&gt; Get the QosProvider params for this QosProvider.">provider_params</a>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Configure the default QosProvider to load the configuration</span></div>
<div class="line">    <span class="comment">// config_file == &quot;/the/path/to/your/xml/configuration.xml&quot;</span></div>
<div class="line">    provider_params.<a class="code" href="classrti_1_1core_1_1QosProviderParams.html#a99ea9943c78b2b7ba5d19669361702c4" title="Get the current list of URL groups stored by this QosProviderParams.">url_profile</a>(<a class="code" href="group__DDSCPP2SupportingTypes.html#gaf41924828eff7595b676d2196b993482" title="A vector of strings.">dds::core::StringSeq</a>(1, config_file));</div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html#a7de651b6063953f6ef6d87ed3111a845" title="Get the default QosProvider.">dds::core::QosProvider::Default</a>()-&gt;<a class="code" href="classdds_1_1core_1_1QosProvider.html#a0328b8ecac8fd932587a9802c4387710" title="&lt;&lt;extension&gt;&gt; Get the rti::core::QosProviderParams for the default QosProvider">default_provider_params</a>(provider_params);</div>
</div><!-- fragment --><p> Then, if you are using a user-generated type, you must register the type with RTI Connext: </p>
<div class="fragment"><div class="line">    <span class="comment">// When using user-generated types, you must register the type with RTI </span></div>
<div class="line">    <span class="comment">// Connext DDS before creating the participants and the rest of the entities</span></div>
<div class="line">    <span class="comment">// in your system </span></div>
<div class="line">    rti::domain::register_type&lt;Foo&gt;(<span class="stringliteral">&quot;Foo&quot;</span>);</div>
</div><!-- fragment --><p> To create and access the system that you have defined in your system, call <a class="el" href="classdds_1_1core_1_1QosProvider.html#a1fd9f2ef91347c496b31780b1b1fc51f" title="&lt;&lt;extension&gt;&gt; Creates a dds::domain::DomainParticipant given its configuration name from a descriptio...">dds::core::QosProvider::create_participant_from_config</a>: </p>
<div class="fragment"><div class="line">    <span class="comment">// Create the participants, changing the domain id from the one in the </span></div>
<div class="line">    <span class="comment">// configuration</span></div>
<div class="line">    <a class="code" href="classrti_1_1domain_1_1DomainParticipantConfigParams.html" title="&lt;&lt;extension&gt;&gt; &lt;&lt;value-type&gt;&gt; Input paramaters for creating a participant from xml configuration...">rti::domain::DomainParticipantConfigParams</a> params(10);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create the participants</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> publication_participant = </div>
<div class="line">        <a class="code" href="classdds_1_1core_1_1QosProvider.html#a7de651b6063953f6ef6d87ed3111a845" title="Get the default QosProvider.">dds::core::QosProvider::Default</a>()-&gt;<a class="code" href="classdds_1_1core_1_1QosProvider.html#a1fd9f2ef91347c496b31780b1b1fc51f" title="&lt;&lt;extension&gt;&gt; Creates a dds::domain::DomainParticipant given its configuration name from a descriptio...">create_participant_from_config</a>(</div>
<div class="line">            <span class="stringliteral">&quot;ExampleParticipantLibrary::ExamplePublicationParticipant&quot;</span>, params);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> subscription_participant = </div>
<div class="line">        <a class="code" href="classdds_1_1core_1_1QosProvider.html#a7de651b6063953f6ef6d87ed3111a845" title="Get the default QosProvider.">dds::core::QosProvider::Default</a>()-&gt;<a class="code" href="classdds_1_1core_1_1QosProvider.html#a1fd9f2ef91347c496b31780b1b1fc51f" title="&lt;&lt;extension&gt;&gt; Creates a dds::domain::DomainParticipant given its configuration name from a descriptio...">create_participant_from_config</a>(</div>
<div class="line">            <span class="stringliteral">&quot;ExampleParticipantLibrary::ExampleSubscriptionParticipant&quot;</span>, params);</div>
</div><!-- fragment --><p> After you have created the participants which were defined in your configuration, you can use various find functions to access the other entities that you have configured. For example, to lookup the DataWriter and DataReader from the example configuration: </p>
<div class="fragment"><div class="line">    <span class="comment">// Lookup the DataWriter and DataReader from the configuration</span></div>
<div class="line">    <a class="code" href="classdds_1_1pub_1_1DataWriter.html" title="&lt;&lt;reference-type&gt;&gt; Allows an application to publish data for a dds::topic::Topic">dds::pub::DataWriter&lt;Foo&gt;</a> found_writer = </div>
<div class="line">        <a class="code" href="namespacerti_1_1pub.html#a7aca151d7ab0ee0e354ef8d84cde6dad" title="&lt;&lt;extension&gt;&gt; Retrieves a dds::pub::DataWriter with the given name within the dds::pub::Publisher">rti::pub::find_datawriter_by_name</a>&lt;</div>
<div class="line">        <a class="code" href="classdds_1_1pub_1_1DataWriter.html" title="&lt;&lt;reference-type&gt;&gt; Allows an application to publish data for a dds::topic::Topic">dds::pub::DataWriter&lt;Foo&gt;</a> &gt;(</div>
<div class="line">            publication_participant, <span class="stringliteral">&quot;ExamplePublisher::ExampleWriter&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// The implicit subscriber was used to create this reader so we only </span></div>
<div class="line">    <span class="comment">// provide the reader&#39;s name, and not a fully qualified name as we did to </span></div>
<div class="line">    <span class="comment">// look up the DataWriter</span></div>
<div class="line">    <a class="code" href="classdds_1_1sub_1_1DataReader.html" title="&lt;&lt;reference-type&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">dds::sub::DataReader&lt;Foo&gt;</a> found_reader = </div>
<div class="line">        <a class="code" href="namespacerti_1_1sub.html#a36ab421210a1976f70870660b3bf573a" title="&lt;&lt;extension&gt;&gt; Retrieves a dds::sub::DataReader with the given name within the dds::sub::Subscriber">rti::sub::find_datareader_by_name</a>&lt;</div>
<div class="line">        <a class="code" href="classdds_1_1sub_1_1DataReader.html" title="&lt;&lt;reference-type&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">dds::sub::DataReader&lt;Foo&gt;</a> &gt;(</div>
<div class="line">            subscription_participant, <span class="stringliteral">&quot;ExampleReader&quot;</span>);</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Connext Modern C++ API Version 5.2.3</A>
Copyright &copy; Wed Apr 27 2016 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
