<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RTI Connext Modern C++ API: Filter Use Cases</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RTI Connext Modern C++ API
   &#160;<span id="projectnumber">Version 5.2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2-20120808 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__NDDSFilterExampleModule.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Filter Use Cases</div>  </div>
<div class="ingroups"><a class="el" href="group__DDSHowToModule.html">Programming How-To's</a></div></div><!--header-->
<div class="contents">

<p>Working with data filters.  
<a href="#details">More...</a></p>
<p>Working with data filters. </p>
<h1><a class="anchor" id="NDDSFilterExampleModule_intro"></a>
Introduction</h1>
<p>RTI Connext supports filtering data either during the exchange from <code><a class="el" href="classdds_1_1pub_1_1DataWriter.html" title="&lt;&lt;reference-type&gt;&gt; Allows an application to publish data for a dds::topic::Topic">dds::pub::DataWriter</a></code> to <code><a class="el" href="classdds_1_1sub_1_1DataReader.html" title="&lt;&lt;reference-type&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">dds::sub::DataReader</a></code>, or after the data has been stored at the <code><a class="el" href="classdds_1_1sub_1_1DataReader.html" title="&lt;&lt;reference-type&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">dds::sub::DataReader</a></code>.</p>
<p>Filtering during the exchange process is performed by a <code><a class="el" href="classdds_1_1topic_1_1ContentFilteredTopic.html" title="&lt;&lt;reference-type&gt;&gt; Specialization of TopicDescription that allows for content-based subscriptions...">dds::topic::ContentFilteredTopic</a></code>, which is created by the <code><a class="el" href="classdds_1_1sub_1_1DataReader.html" title="&lt;&lt;reference-type&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">dds::sub::DataReader</a></code> as a way of specifying a subset of the data samples that it wishes to receive.</p>
<p>Filtering samples that have already been received by the <code><a class="el" href="classdds_1_1sub_1_1DataReader.html" title="&lt;&lt;reference-type&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">dds::sub::DataReader</a></code> is performed by creating a <code>dds::sub::cond::QueryCondition</code>, which can then used to check for matching samples, be alerted when matching samples arrive, or retrieve matching samples.</p>
<p>Filtering may be performed on any topic, either keyed or un-keyed, except the built-in topics. Filtering may be performed on any field, subset of fields, or combination of fields, subject only to the limitations of the filter syntax.</p>
<h1><a class="anchor" id="NDDSFilterExampleModule_examples"></a>
Code Examples</h1>
<p>The following #includes are needed for the examples on this page </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dds/topic/ddstopic.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dds/sub/ddssub.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Foo.hpp&quot;</span></div>
</div><!-- fragment --> <h1><a class="anchor" id="NDDSFilterExampleModule_content_filtered_topic"></a>
Filtering with ContentFilteredTopic</h1>
<ul>
<li><a class="el" href="group__DDSSubscriberExampleModule.html#DDSSubscriberExampleModule_subscriber_setup">Set up a Subscriber</a></li>
</ul>
<ul>
<li><a class="el" href="group__DDSTopicExampleModule.html#DDSTopicExampleModule_setup">Set up a Topic</a></li>
</ul>
<ul>
<li>Create a ContentFilteredTopic, of user data type <code><a class="el" href="classFoo.html" title="A hypothetical topic-type.">Foo</a>:</code> <div class="fragment"><div class="line">    <span class="comment">// Create the DomainParticipant</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create a Topic</span></div>
<div class="line">    <a class="code" href="classdds_1_1topic_1_1Topic.html" title="&lt;&lt;reference-type&gt;&gt; Topic is the most basic description of the data to be published and subscribed...">dds::topic::Topic&lt;Foo&gt;</a> topic(participant, <span class="stringliteral">&quot;MyTopicName&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create the parameter list</span></div>
<div class="line">    std::vector&lt;std::string&gt; cft_parameters(2);</div>
<div class="line">    cft_parameters[0] = <span class="stringliteral">&quot;1&quot;</span>;</div>
<div class="line">    cft_parameters[1] = <span class="stringliteral">&quot;100&quot;</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create the ContentFilteredTopic</span></div>
<div class="line">    <a class="code" href="classdds_1_1topic_1_1ContentFilteredTopic.html" title="&lt;&lt;reference-type&gt;&gt; Specialization of TopicDescription that allows for content-based subscriptions...">dds::topic::ContentFilteredTopic&lt;Foo&gt;</a> cft(</div>
<div class="line">        topic, <span class="comment">// related topic</span></div>
<div class="line">        <span class="stringliteral">&quot;ContentFilteredTopic&quot;</span>, <span class="comment">// local name for the CFT</span></div>
<div class="line">        <a class="code" href="classdds_1_1topic_1_1Filter.html" title="Defines the filter to create a ContentFilteredTopic.">dds::topic::Filter</a>( <span class="comment">// filter (constructed in-line in this example)</span></div>
<div class="line">            <span class="stringliteral">&quot;x &gt; %0 AND x &lt; %1&quot;</span>, <span class="comment">// expression</span></div>
<div class="line">            cft_parameters)); <span class="comment">// parameter vector</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Parameters are optional</span></div>
<div class="line">    <a class="code" href="classdds_1_1topic_1_1ContentFilteredTopic.html" title="&lt;&lt;reference-type&gt;&gt; Specialization of TopicDescription that allows for content-based subscriptions...">dds::topic::ContentFilteredTopic&lt;Foo&gt;</a> cft2(</div>
<div class="line">        topic,</div>
<div class="line">        <span class="stringliteral">&quot;ContentFilteredTopic2&quot;</span>,</div>
<div class="line">        <a class="code" href="classdds_1_1topic_1_1Filter.html" title="Defines the filter to create a ContentFilteredTopic.">dds::topic::Filter</a>(<span class="stringliteral">&quot;x = 100 AND y &lt; 20&quot;</span>));</div>
</div><!-- fragment --><br/>
</li>
<li>Create a DataReader using the ContentFilteredTopic: <div class="fragment"><div class="line">    <a class="code" href="classdds_1_1sub_1_1DataReader.html" title="&lt;&lt;reference-type&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">dds::sub::DataReader&lt;Foo&gt;</a> reader(subscriber, cft);</div>
</div><!-- fragment -->Once setup, reading samples with a <code><a class="el" href="classdds_1_1topic_1_1ContentFilteredTopic.html" title="&lt;&lt;reference-type&gt;&gt; Specialization of TopicDescription that allows for content-based subscriptions...">dds::topic::ContentFilteredTopic</a></code> is exactly the same as normal reads or takes, as described in <a class="el" href="group__DDSReaderExampleModule.html">DataReader Use Cases</a>. <br/>
 <br/>
</li>
<li>Changing filter criteria: <div class="fragment"><div class="line">    std::vector&lt;std::string&gt; new_cft_parameters(2);</div>
<div class="line">    new_cft_parameters[0] = <span class="stringliteral">&quot;5&quot;</span>;</div>
<div class="line">    new_cft_parameters[1] = <span class="stringliteral">&quot;9&quot;</span>;</div>
<div class="line"></div>
<div class="line">    cft.filter_parameters(new_cft_parameters.begin(), new_cft_parameters.end());</div>
</div><!-- fragment --> </li>
</ul>
<h1><a class="anchor" id="NDDSFilterExampleModule_query_conditions"></a>
Filtering with Query Conditions</h1>
<ul>
<li>Creating a QueryCondition <div class="fragment"><div class="line">    <span class="comment">// Create parameter list</span></div>
<div class="line">    std::vector&lt;std::string&gt; query_parameters(2);</div>
<div class="line">    query_parameters[0] = <span class="stringliteral">&quot;1&quot;</span>;</div>
<div class="line">    query_parameters[1] = <span class="stringliteral">&quot;100&quot;</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create query condition</span></div>
<div class="line">    dds::sub::cond::QueryCondition query_condition(</div>
<div class="line">        <a class="code" href="classdds_1_1sub_1_1Query.html" title="&lt;&lt;value-type&gt;&gt; Encapsulates a query for a dds::sub::cond::QueryCondition.">dds::sub::Query</a>(reader, <span class="stringliteral">&quot;x &gt; %0 AND x &lt; %1&quot;</span>, query_parameters),</div>
<div class="line">        <a class="code" href="classdds_1_1sub_1_1status_1_1DataState.html#a82cdbd6d371c7def50b63d1cbf3fbaf2" title="Create a DataState with InstanceState::alive(), ViewState::any(), and SampleState::any()">dds::sub::status::DataState::any_data</a>());</div>
</div><!-- fragment --><br/>
</li>
<li>You can use a QueryCondition in a WaitSet: see <a class="el" href="group__DDSWaitsetExampleModule.html#DDSWaitsetExampleModule_trigger">Waiting for Condition(s) to trigger</a></li>
</ul>
<ul>
<li>And to query for data in a DataReader: see <a class="el" href="group__DDSReaderExampleModule.html#DDSReaderExampleModule_select_samples">Selecting what samples to read</a></li>
</ul>
<ul>
<li>To modify the filter criteria you can use <code>dds::sub::cond::QueryCondition::parameters</code> (similar to <code><a class="el" href="classdds_1_1topic_1_1ContentFilteredTopic.html#ade3305423bc76cd37e7133112141db6c" title="Gets the filter expression parameters.">dds::topic::ContentFilteredTopic::filter_parameters</a></code>) </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Connext Modern C++ API Version 5.2.3</A>
Copyright &copy; Wed Apr 27 2016 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
