<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RTI Connext Modern C++ API: Qos Provider Use Cases</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RTI Connext Modern C++ API
   &#160;<span id="projectnumber">Version 5.2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2-20120808 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__DDSQosProviderExampleModule.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Qos Provider Use Cases</div>  </div>
<div class="ingroups"><a class="el" href="group__DDSHowToModule.html">Programming How-To's</a></div></div><!--header-->
<div class="contents">

<p>How to use the QosProvider class to access XML QoS profiles.  
<a href="#details">More...</a></p>
<p>How to use the QosProvider class to access XML QoS profiles. </p>
<h1><a class="anchor" id="DDSQosProviderExampleModule_setup"></a>
Managing Qos Profiles</h1>
<p>The QosProvider class provides a way for a user to control and access the XML QoS profiles that are loaded by RTI Connext. A QosProvider is created with a URI that identifies a file location containing QoS profiles, a string representation of the QoS profiles that you want the QosProvider to load, or a URL group that has a combination of files and strings from which to load profiles. For more information on the correct format of these URIs and URL groups, please see section 17.11 URL Groups in the RTI_CoreLibrariesAndUtilities_Users_Manual.pdf. More information about QoS Profiles can be found in section 17.9 QoS Profiles, also in the User's Manual.</p>
<p>A QosProvider can also <a class="el" href="group__DDSXTypesExampleModule.html#DDSXTypesExampleModule_dynamic_type_creation_xml">load type definitions</a>.</p>
<p>The following #includes are needed for the examples on this page </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dds/dds.hpp&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;Foo.hpp&quot;</span></div>
</div><!-- fragment --><ul>
<li>The Qos Profile that will be used in the following examples. 'a_string_uri' in any of the following examples is this profile in the form of str://"&lt;dds&gt;...&lt;/dds&gt;" <div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> MY_XML_SIZE = 20;</div>
<div class="line"></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> * MyXML[MY_XML_SIZE] =</div>
<div class="line">{</div>
<div class="line"><span class="stringliteral">&quot;&lt;dds&gt;&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;&lt;qos_library name=\&quot;MyLibrary\&quot;&gt;&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;&lt;qos_profile name=\&quot;MyProfile\&quot; is_default_qos=\&quot;true\&quot;&gt;&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;&lt;participant_qos&gt;&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;&lt;participant_name&gt;&quot;</span>,</div>
<div class="line">                    <span class="stringliteral">&quot;&lt;name&gt;ExampleParticipantName&lt;/name&gt;&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;&lt;/participant_name&gt;&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;&lt;/participant_qos&gt;&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;&lt;/qos_profile&gt;&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;&lt;/qos_library&gt;&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;&lt;qos_library name=\&quot;MySecondLibrary\&quot;&gt;&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;&lt;qos_profile name=\&quot;MySecondProfile\&quot;&gt;&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;&lt;participant_qos&gt;&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;&lt;participant_name&gt;&quot;</span>,</div>
<div class="line">                    <span class="stringliteral">&quot;&lt;name&gt;SecondExampleParticipantName&lt;/name&gt;&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;&lt;/participant_name&gt;&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;&lt;/participant_qos&gt;&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;&lt;/qos_profile&gt;&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;&lt;/qos_library&gt;&quot;</span>,</div>
<div class="line"><span class="stringliteral">&quot;&lt;/dds&gt;&quot;</span></div>
<div class="line">};</div>
</div><!-- fragment --><br/>
</li>
<li>Creating a QosProvider <div class="fragment"><div class="line">    <span class="comment">// Create a QosProvider which ignores any is_default_qos tags found in XML</span></div>
<div class="line">    <span class="comment">// by passing in the USE_DDS_DEFAULT_QOS_PROFILE constant to the QosProvider&#39;s</span></div>
<div class="line">    <span class="comment">// constructor.</span></div>
<div class="line">    <span class="comment">// Creating the QosProvider this way will allow you to access the </span></div>
<div class="line">    <span class="comment">// RTI Connext default Qos values for each entity. The following </span></div>
<div class="line">    <span class="comment">// QosProvider will not have a default library or profile, even though</span></div>
<div class="line">    <span class="comment">// MyLibrary::MyProfile has been marked as is_default_qos</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html" title="&lt;&lt;reference-type&gt;&gt; The QosProvider class provides a way for a user to control and access the XML QoS ...">dds::core::QosProvider</a> qos_provider_no_default_profile(</div>
<div class="line">       a_string_uri, rti::core::USE_DDS_DEFAULT_QOS_PROFILE);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// You can also create a QosProvider which overrides any is_default_qos tag </span></div>
<div class="line">    <span class="comment">// found in XML with a new default profile. In this case, instead of </span></div>
<div class="line">    <span class="comment">// MyLibrary::MyProfile as the default profile, the new default will be the </span></div>
<div class="line">    <span class="comment">// built-in BuiltinQosLib::Baseline.5.1.0 profile</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html" title="&lt;&lt;reference-type&gt;&gt; The QosProvider class provides a way for a user to control and access the XML QoS ...">dds::core::QosProvider</a> qos_provider_new_default(</div>
<div class="line">       a_string_uri, <span class="stringliteral">&quot;BuiltinQosLib::Baseline.5.1.0&quot;</span>);</div>
</div><!-- fragment --><br/>
</li>
<li>Configuring a QosProvider <div class="fragment"><div class="line">    <span class="comment">// The ProfileQosPolicy that is available in all other RTI Connext language </span></div>
<div class="line">    <span class="comment">// APIs is renamed rti::core::QosProviderParams in the new C++ PSM. These </span></div>
<div class="line">    <span class="comment">// parameters allow you to control which QoS profiles RTI Connext will </span></div>
<div class="line">    <span class="comment">// load</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html" title="&lt;&lt;reference-type&gt;&gt; The QosProvider class provides a way for a user to control and access the XML QoS ...">dds::core::QosProvider</a> qos_provider(a_string_uri);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get the current QosProviderParams from the qos_provider</span></div>
<div class="line">    <a class="code" href="classrti_1_1core_1_1QosProviderParams.html" title="&lt;&lt;extension&gt;&gt; &lt;&lt;value-type&gt;&gt; Configure options that control the way that XML documents containing QoS...">rti::core::QosProviderParams</a> params = qos_provider-&gt;provider_params();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Ignore any qos profiles in the USER_QOS_PROFILES.xml file </span></div>
<div class="line">    params.<a class="code" href="classrti_1_1core_1_1QosProviderParams.html#acde767b6c0b80bc26d69872897f26170" title="Get the value that is currently set for ignore_user_profile.">ignore_user_profile</a>(<span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Setting the params automatically reloads the profiles</span></div>
<div class="line">    qos_provider-&gt;provider_params(params);</div>
</div><!-- fragment --><br/>
</li>
<li>Accessing, changing and using the QoS libraries and profiles that are loaded by a QosProvider <div class="fragment"><div class="line">    <span class="comment">// After you have created the qos_provider with the QoS profiles that </span></div>
<div class="line">    <span class="comment">// you want to load, you can access the names of the loaded libraries and </span></div>
<div class="line">    <span class="comment">// profiles and use the profiles to create entities</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html" title="&lt;&lt;reference-type&gt;&gt; The QosProvider class provides a way for a user to control and access the XML QoS ...">dds::core::QosProvider</a> qos_provider(a_string_uri);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// This participant will have the name &quot;ExampleParticipantName&quot; from the </span></div>
<div class="line">    <span class="comment">// MyLibrary::MyProfile marked with the is_default_qos tag</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(0, qos_provider.participant_qos());</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get a list of the currently loaded libraries. This list will include </span></div>
<div class="line">    <span class="comment">// all of the built-in QoS libraries as well as the two libraries from the </span></div>
<div class="line">    <span class="comment">// string URI that this QoS Provider was created with</span></div>
<div class="line">    <a class="code" href="group__DDSCPP2SupportingTypes.html#gaf41924828eff7595b676d2196b993482" title="A vector of strings.">dds::core::StringSeq</a> libraries = qos_provider-&gt;qos_profile_libraries();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get a list of the currently loaded profiles for a given library</span></div>
<div class="line">    <span class="keywordflow">if</span> (libraries.size() &gt; 0) {</div>
<div class="line">        <a class="code" href="group__DDSCPP2SupportingTypes.html#gaf41924828eff7595b676d2196b993482" title="A vector of strings.">dds::core::StringSeq</a> profiles = qos_provider-&gt;qos_profiles(libraries[0]);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get the current default library, default_library_name will be &quot;MyLibrary&quot;</span></div>
<div class="line">    <span class="comment">// This is the library that is checked in if you set the default</span></div>
<div class="line">    <span class="comment">// profile without specifying a library name</span></div>
<div class="line">    <a class="code" href="classrti_1_1core_1_1optional__value.html" title="&lt;&lt;extension&gt;&gt; Represents a value that can be initialized or not">rti::core::optional_value&lt;std::string&gt;</a> default_library_name = </div>
<div class="line">        qos_provider-&gt;default_library();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Set the current default library</span></div>
<div class="line">    qos_provider-&gt;default_library(<span class="stringliteral">&quot;BuiltinQosLibExp&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get the current default profile library. default_profile_library_name</span></div>
<div class="line">    <span class="comment">// will be &quot;MyLibrary&quot;. This is the library that the default profile </span></div>
<div class="line">    <span class="comment">// is a part of. You cannot explicitly set this field, it gets set anytime </span></div>
<div class="line">    <span class="comment">// that the default profile is changed</span></div>
<div class="line">    <a class="code" href="classrti_1_1core_1_1optional__value.html" title="&lt;&lt;extension&gt;&gt; Represents a value that can be initialized or not">rti::core::optional_value&lt;std::string&gt;</a> default_profile_library_name = </div>
<div class="line">        qos_provider-&gt;default_profile_library();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get the current default profile, default_profile_name will be &quot;MyProfile&quot;</span></div>
<div class="line">    <a class="code" href="classrti_1_1core_1_1optional__value.html" title="&lt;&lt;extension&gt;&gt; Represents a value that can be initialized or not">rti::core::optional_value&lt;std::string&gt;</a> default_profile_name = </div>
<div class="line">        qos_provider-&gt;default_profile();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// default_library(), default_profile_library(), and default_profile() </span></div>
<div class="line">    <span class="comment">// all return rti::core::optional_value&lt;std::string&gt; types because it is </span></div>
<div class="line">    <span class="comment">// possible to not have a default library or profile. You can also clear </span></div>
<div class="line">    <span class="comment">// the default library and profile using </span></div>
<div class="line">    <span class="comment">// rti::core::USE_DDS_DEFAULT_QOS_PROFILE</span></div>
<div class="line">    qos_provider-&gt;default_profile(rti::core::USE_DDS_DEFAULT_QOS_PROFILE);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// In order for all of the changes to the default library and profile </span></div>
<div class="line">    <span class="comment">// names to take effect the QoS libraries must be reloaded</span></div>
<div class="line">    qos_provider-&gt;reload_profiles();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This topic will get created with the default RTI Connext TopicQos values</span></div>
<div class="line">    <a class="code" href="classdds_1_1topic_1_1Topic.html" title="&lt;&lt;reference-type&gt;&gt; Topic is the most basic description of the data to be published and subscribed...">dds::topic::Topic&lt;Foo&gt;</a> </div>
<div class="line">        topic(participant, <span class="stringliteral">&quot;ExampleTopic&quot;</span>, qos_provider.topic_qos());</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Setting the default profile. Because we set the default library to </span></div>
<div class="line">    <span class="comment">// BuiltinQosLibExp above, we only need to specify the profile name here.</span></div>
<div class="line">    <span class="comment">// If the default_library name hadn&#39;t been changed then we could</span></div>
<div class="line">    <span class="comment">// still set the default to this same profile profile by using the string </span></div>
<div class="line">    <span class="comment">// &quot;BuiltinQosLibExp::Generic.StrictReliable&quot;</span></div>
<div class="line">    qos_provider-&gt;default_profile(<span class="stringliteral">&quot;Generic.StrictReliable&quot;</span>);</div>
<div class="line"></div>
<div class="line">    qos_provider-&gt;reload_profiles();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Retrieve the DataWriterQos from the QosProvider and edit any desired </span></div>
<div class="line">    <span class="comment">// values. The assignment results in a copy so any changes made to the</span></div>
<div class="line">    <span class="comment">// writer_qos object will not be reflected in any subsequent calls to</span></div>
<div class="line">    <span class="comment">// qos_provider.datawriter_qos()</span></div>
<div class="line">    <a class="code" href="classdds_1_1pub_1_1qos_1_1DataWriterQos.html" title="&lt;&lt;value-type&gt;&gt; Container of the QoS policies that a dds::pub::DataWriter supports">dds::pub::qos::DataWriterQos</a> writer_qos = qos_provider.datawriter_qos();</div>
<div class="line"></div>
<div class="line">    writer_qos &lt;&lt; <a class="code" href="classdds_1_1core_1_1policy_1_1Reliability.html#aa68882d7648a4a3241ccc57ce15ef4ea" title="Creates a policy with ReliabilityKind::RELIABLE and optionally a max blocking time.">dds::core::policy::Reliability::Reliable</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create a strict reliable DataWriter</span></div>
<div class="line">    <a class="code" href="classdds_1_1pub_1_1DataWriter.html" title="&lt;&lt;reference-type&gt;&gt; Allows an application to publish data for a dds::topic::Topic">dds::pub::DataWriter&lt;Foo&gt;</a>(</div>
<div class="line">       <a class="code" href="classdds_1_1pub_1_1Publisher.html" title="&lt;&lt;reference-type&gt;&gt; A publisher is the object responsible for the actual dissemination of publications...">dds::pub::Publisher</a>(participant), topic, writer_qos);</div>
</div><!-- fragment --><br/>
</li>
<li>Using and configuring the default QosProvider <div class="fragment"><div class="line">    <span class="comment">// QoS profiles from any XML file specified in the environment variable</span></div>
<div class="line">    <span class="comment">// NDDS_QOS_PROFILES file will not be loaded by the application</span></div>
<div class="line">    <a class="code" href="classrti_1_1core_1_1QosProviderParams.html" title="&lt;&lt;extension&gt;&gt; &lt;&lt;value-type&gt;&gt; Configure options that control the way that XML documents containing QoS...">rti::core::QosProviderParams</a> params;</div>
<div class="line">    params.<a class="code" href="classrti_1_1core_1_1QosProviderParams.html#a529a4740e58cf3782c4a2ebd5f733b68" title="Get the value that is currently set for ignore_environment_profile.">ignore_environment_profile</a>(<span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Have the default QosProvider load the example XML QoS profile at the</span></div>
<div class="line">    <span class="comment">// top of this page</span></div>
<div class="line">    <a class="code" href="group__DDSCPP2SupportingTypes.html#gaf41924828eff7595b676d2196b993482" title="A vector of strings.">dds::core::StringSeq</a> my_string_profile(MyXML, MyXML + MY_XML_SIZE);</div>
<div class="line">    params.<a class="code" href="classrti_1_1core_1_1QosProviderParams.html#a90f50be55c423383417bc6c71fb1abe7" title="Get the current list of string profiles stored by this QosProviderParams.">string_profile</a>(my_string_profile);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html#a7de651b6063953f6ef6d87ed3111a845" title="Get the default QosProvider.">dds::core::QosProvider::Default</a>()-&gt;<a class="code" href="classdds_1_1core_1_1QosProvider.html#a0328b8ecac8fd932587a9802c4387710" title="&lt;&lt;extension&gt;&gt; Get the rti::core::QosProviderParams for the default QosProvider">default_provider_params</a>(params);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This participant will be created with the  name &quot;ExampleParticipantName&quot; </span></div>
<div class="line">    <span class="comment">// because &quot;MyLibrary::MyProfile&quot; has been has been marked as the default </span></div>
<div class="line">    <span class="comment">// with the is_default_qos tag and was loaded because we set the </span></div>
<div class="line">    <span class="comment">// string_profile field of the default QosProvider&#39;s QosProviderParams. </span></div>
<div class="line">    <span class="comment">// The Qos values that this participant is created with are equal to </span></div>
<div class="line">    <span class="comment">// dds::core::QosProvider::Default().participant_qos()</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant1(0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Change the default profile</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html#a7de651b6063953f6ef6d87ed3111a845" title="Get the default QosProvider.">dds::core::QosProvider::Default</a>()-&gt;<a class="code" href="classdds_1_1core_1_1QosProvider.html#a065b1f866d3b76a568264d4378a72378" title="&lt;&lt;extension&gt;&gt; Get the default profile associated with this QosProvider.">default_profile</a>(</div>
<div class="line">       <span class="stringliteral">&quot;MySecondLibrary::MySecondProfile&quot;</span>);</div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html#a7de651b6063953f6ef6d87ed3111a845" title="Get the default QosProvider.">dds::core::QosProvider::Default</a>()-&gt;<a class="code" href="classdds_1_1core_1_1QosProvider.html#afda46c03b56dee8faa55beacd0281573" title="&lt;&lt;extension&gt;&gt; Reload the XML QoS profiles.">reload_profiles</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This participant will be created with the name &quot;SecondExampleParticipantName&quot;</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant2(1);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Reset the QosProviderParams for the default QosProvider</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html#ace5ec67862af095ec82e02c88fb6ffb9" title="Reset the default settings of the default QosProvider.">dds::core::QosProvider::reset_default</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This participant will not have a participant name (the default </span></div>
<div class="line">    <span class="comment">// RTI Connext value) because we reset the default QosProviderParams, </span></div>
<div class="line">    <span class="comment">// meaning that the value for string_profile is empty and the above example </span></div>
<div class="line">    <span class="comment">// XML Qos profile is not loaded.</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant3(2);</div>
</div><!-- fragment --> <dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__DDSXTypesExampleModule.html#DDSXTypesExampleModule_dynamic_type_creation_xml">Create a DynamicType from an XML description</a></dd></dl>
</li>
</ul>
<h1><a class="anchor" id="DDSQosProviderExampleModule_default_provider"></a>
The Default Qos Provider</h1>
<p>The default QoS values that are used to create an entity are determined by which QoS profiles have been loaded at the time of that entity's creation and which of these profiles has been marked as the default profile. RTI Connext will automatically load XML Qos profiles from a number of locations (see section 17.2 How to Load XML-Specified QoS Setting in the RTI_CoreLibrariesAndUtilities_Users_Manual.pdf). Marking a profile as the default profile to use during entity creation can be done with an is_default_qos tag in the XML profile or by setting the default profile of the default QosProvider in code.</p>
<p>The default QosProvider is a singleton that can be used to access and control the Qos XML profiles that will be used when creating entities without explicitly providing a Qos object with which to construct the entity. Changing the QosProviderParams of the default QosProvider will affect all future entity creation with default Qos values. <br/>
</p>
<ul>
<li>Using and configuring the default QosProvider <div class="fragment"><div class="line">    <span class="comment">// QoS profiles from any XML file specified in the environment variable</span></div>
<div class="line">    <span class="comment">// NDDS_QOS_PROFILES file will not be loaded by the application</span></div>
<div class="line">    <a class="code" href="classrti_1_1core_1_1QosProviderParams.html" title="&lt;&lt;extension&gt;&gt; &lt;&lt;value-type&gt;&gt; Configure options that control the way that XML documents containing QoS...">rti::core::QosProviderParams</a> params;</div>
<div class="line">    params.<a class="code" href="classrti_1_1core_1_1QosProviderParams.html#a529a4740e58cf3782c4a2ebd5f733b68" title="Get the value that is currently set for ignore_environment_profile.">ignore_environment_profile</a>(<span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Have the default QosProvider load the example XML QoS profile at the</span></div>
<div class="line">    <span class="comment">// top of this page</span></div>
<div class="line">    <a class="code" href="group__DDSCPP2SupportingTypes.html#gaf41924828eff7595b676d2196b993482" title="A vector of strings.">dds::core::StringSeq</a> my_string_profile(MyXML, MyXML + MY_XML_SIZE);</div>
<div class="line">    params.<a class="code" href="classrti_1_1core_1_1QosProviderParams.html#a90f50be55c423383417bc6c71fb1abe7" title="Get the current list of string profiles stored by this QosProviderParams.">string_profile</a>(my_string_profile);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html#a7de651b6063953f6ef6d87ed3111a845" title="Get the default QosProvider.">dds::core::QosProvider::Default</a>()-&gt;<a class="code" href="classdds_1_1core_1_1QosProvider.html#a0328b8ecac8fd932587a9802c4387710" title="&lt;&lt;extension&gt;&gt; Get the rti::core::QosProviderParams for the default QosProvider">default_provider_params</a>(params);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This participant will be created with the  name &quot;ExampleParticipantName&quot; </span></div>
<div class="line">    <span class="comment">// because &quot;MyLibrary::MyProfile&quot; has been has been marked as the default </span></div>
<div class="line">    <span class="comment">// with the is_default_qos tag and was loaded because we set the </span></div>
<div class="line">    <span class="comment">// string_profile field of the default QosProvider&#39;s QosProviderParams. </span></div>
<div class="line">    <span class="comment">// The Qos values that this participant is created with are equal to </span></div>
<div class="line">    <span class="comment">// dds::core::QosProvider::Default().participant_qos()</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant1(0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Change the default profile</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html#a7de651b6063953f6ef6d87ed3111a845" title="Get the default QosProvider.">dds::core::QosProvider::Default</a>()-&gt;<a class="code" href="classdds_1_1core_1_1QosProvider.html#a065b1f866d3b76a568264d4378a72378" title="&lt;&lt;extension&gt;&gt; Get the default profile associated with this QosProvider.">default_profile</a>(</div>
<div class="line">       <span class="stringliteral">&quot;MySecondLibrary::MySecondProfile&quot;</span>);</div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html#a7de651b6063953f6ef6d87ed3111a845" title="Get the default QosProvider.">dds::core::QosProvider::Default</a>()-&gt;<a class="code" href="classdds_1_1core_1_1QosProvider.html#afda46c03b56dee8faa55beacd0281573" title="&lt;&lt;extension&gt;&gt; Reload the XML QoS profiles.">reload_profiles</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This participant will be created with the name &quot;SecondExampleParticipantName&quot;</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant2(1);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Reset the QosProviderParams for the default QosProvider</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html#ace5ec67862af095ec82e02c88fb6ffb9" title="Reset the default settings of the default QosProvider.">dds::core::QosProvider::reset_default</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This participant will not have a participant name (the default </span></div>
<div class="line">    <span class="comment">// RTI Connext value) because we reset the default QosProviderParams, </span></div>
<div class="line">    <span class="comment">// meaning that the value for string_profile is empty and the above example </span></div>
<div class="line">    <span class="comment">// XML Qos profile is not loaded.</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant3(2);</div>
</div><!-- fragment --></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Connext Modern C++ API Version 5.2.3</A>
Copyright &copy; Wed Apr 27 2016 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
