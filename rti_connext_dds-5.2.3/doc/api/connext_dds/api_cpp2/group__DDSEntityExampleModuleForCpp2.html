<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RTI Connext Modern C++ API: Entity Use Cases</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RTI Connext Modern C++ API
   &#160;<span id="projectnumber">Version 5.2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2-20120808 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__DDSEntityExampleModuleForCpp2.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Entity Use Cases</div>  </div>
<div class="ingroups"><a class="el" href="group__DDSHowToModule.html">Programming How-To's</a></div></div><!--header-->
<div class="contents">
<p>The following #includes are needed for the examples on this page </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dds/domain/ddsdomain.hpp&gt;</span></div>
</div><!-- fragment --> <h1><a class="anchor" id="DDSEntityExampleModule_qos"></a>
Changing the QoS for an entity</h1>
<p>The QoS for an entity can be specified at entity creation time. Once an entity has been created, its QoS can be manipulated as the following examples illustrate. A DataWriter is used in these examples, but the same can be applied to DomainParticipants, Subscribers, Publishers, DataReaders, and Topics.</p>
<ul>
<li>See <a class="el" href="group__DDSQosProviderExampleModule.html">QosProvider</a> for examples on how to manage user-defined QoS profiles. <br/>
 <br/>
</li>
<li>See <a class="el" href="group__DDSQosExampleModule.html">Qos Use Cases</a> for examples on how to work with the Qos policy classes. <br/>
 <br/>
</li>
<li>Get an entity's QoS settings <div class="fragment"><div class="line">    <a class="code" href="classdds_1_1pub_1_1DataWriter.html" title="&lt;&lt;reference-type&gt;&gt; Allows an application to publish data for a dds::topic::Topic">dds::pub::DataWriter&lt;Foo&gt;</a> writer(<a class="code" href="classdds_1_1pub_1_1Publisher.html" title="&lt;&lt;reference-type&gt;&gt; A publisher is the object responsible for the actual dissemination of publications...">dds::pub::Publisher</a>(participant), a_topic); </div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get the DataWriter&#39;s QoS </span></div>
<div class="line">    <a class="code" href="classdds_1_1pub_1_1qos_1_1DataWriterQos.html" title="&lt;&lt;value-type&gt;&gt; Container of the QoS policies that a dds::pub::DataWriter supports">dds::pub::qos::DataWriterQos</a> writer_qos = writer.qos();</div>
</div><!-- fragment --><br/>
</li>
<li>Change the desired qos policy fields <div class="fragment"><div class="line">    <span class="comment">// Change the History QoS for the DataWriter using the History QoS&#39;s </span></div>
<div class="line">    <span class="comment">// KeepAll named constructor</span></div>
<div class="line">    writer_qos &lt;&lt; <a class="code" href="classdds_1_1core_1_1policy_1_1History.html#abbb117f178a30e6753ba7e36998a471a" title="Creates a History with HistoryKind::KEEP_ALL.">dds::core::policy::History::KeepAll</a>();</div>
</div><!-- fragment --><br/>
</li>
<li>Set the qos <div class="fragment"><div class="line">    <span class="comment">// Set the modified QoS for the DataWriter</span></div>
<div class="line">    writer.qos(writer_qos);</div>
</div><!-- fragment --> </li>
</ul>
<h1><a class="anchor" id="DDSEntityExampleModule_listener"></a>
Changing the listener and enabling/disabling statuses associated with it</h1>
<p>The listener for an entity can be specified at the entity creation time. By default the listener is <em>enabled</em> for all the statuses supported by the entity.</p>
<p>Once an entity has been created, its listener and/or the statuses for which it is enabled can be manipulated as follows.</p>
<p>The following examples use a DomainParticipant but the same examples can be applied to all other entities (Subscribers, Publishers, DataReaders, DataWriters, and Topics)</p>
<ul>
<li>User defines entity listener methods <div class="fragment"><div class="line"><span class="keyword">class </span>ExampleDomainParticipantListener : <span class="keyword">public</span> dds::domain::NoOpDomainParticipantListener</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    ExampleDomainParticipantListener() {}</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">void</span> on_liveliness_lost(</div>
<div class="line">       <a class="code" href="classdds_1_1pub_1_1AnyDataWriter.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a DataWriter of any ty...">dds::pub::AnyDataWriter</a>&amp;,</div>
<div class="line">       const::dds::core::status::LivelinessLostStatus&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_liveliness_lost&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_liveliness_changed(</div>
<div class="line">       <a class="code" href="classdds_1_1sub_1_1AnyDataReader.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a DataReader of any ty...">dds::sub::AnyDataReader</a>&amp;,</div>
<div class="line">       <span class="keyword">const</span> <a class="code" href="classdds_1_1core_1_1status_1_1LivelinessChangedStatus.html" title="Information about the status dds::core::status::StatusMask::liveliness_changed()">dds::core::status::LivelinessChangedStatus</a>&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_liveliness_changed&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_inconsistent_topic(</div>
<div class="line">       <a class="code" href="classdds_1_1topic_1_1AnyTopic.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a Topic of any type...">dds::topic::AnyTopic</a>&amp;,</div>
<div class="line">       <span class="keyword">const</span> <a class="code" href="classdds_1_1core_1_1status_1_1InconsistentTopicStatus.html" title="Information about the status dds::core::status::StatusMask::inconsistent_topic()">dds::core::status::InconsistentTopicStatus</a>&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_inconsistent_topic&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_data_on_readers(</div>
<div class="line">       <a class="code" href="classdds_1_1sub_1_1Subscriber.html" title="&lt;&lt;reference-type&gt;&gt; A subscriber is the object responsible for actually receiving data from a subscrip...">dds::sub::Subscriber</a>&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_data_on_readers&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_offered_deadline_missed(</div>
<div class="line">       <a class="code" href="classdds_1_1pub_1_1AnyDataWriter.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a DataWriter of any ty...">dds::pub::AnyDataWriter</a>&amp;,</div>
<div class="line">       const::dds::core::status::OfferedDeadlineMissedStatus&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_offered_deadline_missed&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_offered_incompatible_qos(</div>
<div class="line">       <a class="code" href="classdds_1_1pub_1_1AnyDataWriter.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a DataWriter of any ty...">dds::pub::AnyDataWriter</a>&amp;,</div>
<div class="line">       const::dds::core::status::OfferedIncompatibleQosStatus&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_offered_incompatible_qos&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_publication_matched(</div>
<div class="line">       <a class="code" href="classdds_1_1pub_1_1AnyDataWriter.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a DataWriter of any ty...">dds::pub::AnyDataWriter</a>&amp;,</div>
<div class="line">       const::dds::core::status::PublicationMatchedStatus&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_publication_matched&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_requested_deadline_missed(</div>
<div class="line">       <a class="code" href="classdds_1_1sub_1_1AnyDataReader.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a DataReader of any ty...">dds::sub::AnyDataReader</a>&amp;,</div>
<div class="line">       <span class="keyword">const</span> <a class="code" href="classdds_1_1core_1_1status_1_1RequestedDeadlineMissedStatus.html" title="Information about the status dds::core::status::StatusMask::requested_deadline_missed()">dds::core::status::RequestedDeadlineMissedStatus</a>&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_requested_deadline_missed&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_requested_incompatible_qos(</div>
<div class="line">       <a class="code" href="classdds_1_1sub_1_1AnyDataReader.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a DataReader of any ty...">dds::sub::AnyDataReader</a>&amp;,</div>
<div class="line">       <span class="keyword">const</span> <a class="code" href="classdds_1_1core_1_1status_1_1RequestedIncompatibleQosStatus.html" title="Information about the status dds::core::status::StatusMask::requested_incompatible_qos()">dds::core::status::RequestedIncompatibleQosStatus</a>&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_requested_incompatible_qos&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_sample_lost(</div>
<div class="line">       <a class="code" href="classdds_1_1sub_1_1AnyDataReader.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a DataReader of any ty...">dds::sub::AnyDataReader</a>&amp;,</div>
<div class="line">       <span class="keyword">const</span> <a class="code" href="classdds_1_1core_1_1status_1_1SampleLostStatus.html" title="Information about the status dds::core::status::StatusMask::sample_lost()">dds::core::status::SampleLostStatus</a>&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_sample_lost&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_sample_rejected(</div>
<div class="line">       <a class="code" href="classdds_1_1sub_1_1AnyDataReader.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a DataReader of any ty...">dds::sub::AnyDataReader</a>&amp;,</div>
<div class="line">       <span class="keyword">const</span> <a class="code" href="classdds_1_1core_1_1status_1_1SampleRejectedStatus.html" title="Information about the status dds::core::status::StatusMask::sample_rejected()">dds::core::status::SampleRejectedStatus</a>&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_sample_rejected&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_subscription_matched(</div>
<div class="line">       <a class="code" href="classdds_1_1sub_1_1AnyDataReader.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a DataReader of any ty...">dds::sub::AnyDataReader</a>&amp;,</div>
<div class="line">       <span class="keyword">const</span> <a class="code" href="classdds_1_1core_1_1status_1_1SubscriptionMatchedStatus.html" title="Information about the status dds::core::status::StatusMask::subscription_matched()">dds::core::status::SubscriptionMatchedStatus</a>&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_subscription_matched&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordtype">void</span> on_data_available(</div>
<div class="line">       <a class="code" href="classdds_1_1sub_1_1AnyDataReader.html" title="&lt;&lt;reference-type&gt;&gt; This class provides an non-template holder for representing a DataReader of any ty...">dds::sub::AnyDataReader</a>&amp;)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;on_data_available&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">};</div>
</div><!-- fragment --><br/>
</li>
<li>Get an entity's listener <div class="fragment"><div class="line">    ExampleDomainParticipantListener *listener = <span class="keyword">new</span> ExampleDomainParticipantListener;</div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(</div>
<div class="line">       0, <a class="code" href="classdds_1_1domain_1_1qos_1_1DomainParticipantQos.html" title="&lt;&lt;value-type&gt;&gt; Container of the QoS policies that a dds::domain::DomainParticipant supports...">dds::domain::qos::DomainParticipantQos</a>(), listener);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipantListener.html" title="The listener class for DomainParticipants.">dds::domain::DomainParticipantListener</a> *retrieved_listener = participant.<a class="code" href="classdds_1_1domain_1_1DomainParticipant.html#ad320f617f02348278ac45417671afce8" title="Register a listener with the DomainParticipant.">listener</a>();</div>
</div><!-- fragment --><br/>
</li>
<li>Enable statuses for the <code>listener</code> <div class="fragment"><div class="line">    <span class="comment">// The default constructor creates an empty StatusMask</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1status_1_1StatusMask.html" title="A std::bitset (list) of statuses.">dds::core::status::StatusMask</a> enabled_status_list; </div>
<div class="line"></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Add more statuses to the enabled_status_list</span></div>
<div class="line">    enabled_status_list |= <a class="code" href="classdds_1_1core_1_1status_1_1StatusMask.html#a493eee23d95003104e802ef5a1ea4b61" title="The liveliness of one or more dds::pub::DataWriter that were writing instances read through the dds::...">dds::core::status::StatusMask::liveliness_changed</a>() |</div>
<div class="line">        <a class="code" href="classdds_1_1core_1_1status_1_1StatusMask.html#a01b6206951c1c10a1aebd35f2d3b2256" title="A QosPolicy value was incompatible with what was requested.">dds::core::status::StatusMask::offered_incompatible_qos</a>();</div>
</div><!-- fragment --><br/>
</li>
<li>Disable a status for the <code>listener</code> <div class="fragment"><div class="line">    enabled_status_list &amp;= ~dds::core::status::StatusMask::offered_incompatible_qos();</div>
</div><!-- fragment --><br/>
</li>
<li>Set an entity's listener and only enable the listener for the statuses specified by the <code>enabled_status_list</code>. <div class="fragment"><div class="line">    participant.<a class="code" href="classdds_1_1domain_1_1DomainParticipant.html#ad320f617f02348278ac45417671afce8" title="Register a listener with the DomainParticipant.">listener</a>(listener, enabled_status_list);</div>
</div><!-- fragment --> </li>
</ul>
<h1><a class="anchor" id="DDSEntityExampleModule_statuscondition"></a>
Enabling/Disabling statuses associated with a status condition</h1>
<p>Upon entity creation, by default, all the statuses are <em>enabled</em> for the DDS_StatusCondition associated with the entity.</p>
<p>Once an entity has been created, the list of statuses for which the DDS_StatusCondition is triggered can be manipulated as follows.</p>
<ul>
<li>Given an <code>entity</code> and the associated <code>status_condition</code> <div class="fragment"><div class="line">    ExampleDomainParticipantListener *listener = <span class="keyword">new</span> ExampleDomainParticipantListener;</div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(</div>
<div class="line">       0, <a class="code" href="classdds_1_1domain_1_1qos_1_1DomainParticipantQos.html" title="&lt;&lt;value-type&gt;&gt; Container of the QoS policies that a dds::domain::DomainParticipant supports...">dds::domain::qos::DomainParticipantQos</a>(), listener);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1cond_1_1StatusCondition.html" title="&lt;&lt;reference-type&gt;&gt; A condition associated with each dds::core::Entity">dds::core::cond::StatusCondition</a> status_condition(participant);</div>
</div><!-- fragment --><br/>
</li>
<li>Get the list of statuses enabled for the <code>status_condition</code> <div class="fragment"><div class="line">    <a class="code" href="classdds_1_1core_1_1status_1_1StatusMask.html" title="A std::bitset (list) of statuses.">dds::core::status::StatusMask</a> enabled_status_list = status_condition.enabled_statuses();</div>
</div><!-- fragment --><br/>
</li>
<li>Check if a given status is enabled for the <code>status_condition</code> <div class="fragment"><div class="line">    <span class="comment">// StatusMask inherits from std::bitset. You can use std::bitset&#39;s any() </span></div>
<div class="line">    <span class="comment">// method to check if a given status is enabled</span></div>
<div class="line">    <span class="keywordflow">if</span> ((enabled_status_list &amp; <a class="code" href="classdds_1_1core_1_1status_1_1StatusMask.html#af285309f34d72170be8c2815524ac9e7" title="New data is available.">dds::core::status::StatusMask::data_on_readers</a>()).any()) {</div>
<div class="line">        <span class="comment">// Do something to handle the on_data_on_readers status...</span></div>
<div class="line">    }</div>
</div><!-- fragment --><br/>
</li>
<li>Enable statuses for the <code>status_condition</code> <div class="fragment"><div class="line">    status_condition.enabled_statuses(</div>
<div class="line">       <a class="code" href="classdds_1_1core_1_1status_1_1StatusMask.html#a79fd8d7707a83b915196251598906813" title="Another topic exists with the same name but different characteristics.">dds::core::status::StatusMask::inconsistent_topic</a>() | </div>
<div class="line">       <a class="code" href="classdds_1_1core_1_1status_1_1StatusMask.html#aa7251d1ddcd3b612887ed7ed8d038bdd" title="A (received) sample has been rejected.">dds::core::status::StatusMask::sample_rejected</a>());</div>
</div><!-- fragment --><br/>
</li>
<li>Disable statuses for the <code>status_condition</code> <div class="fragment"><div class="line">    status_condition.enabled_statuses(</div>
<div class="line">       ~<a class="code" href="classdds_1_1core_1_1status_1_1StatusMask.html#a79fd8d7707a83b915196251598906813" title="Another topic exists with the same name but different characteristics.">dds::core::status::StatusMask::inconsistent_topic</a>());</div>
</div><!-- fragment --> </li>
</ul>
<h1><a class="anchor" id="DDSEntityExampleModule_ignore"></a>
Ignoring Entities</h1>
<p>A Topic is used in this example, but each of the other entities (DomainParticipants, Publishers, Subscribers, and DataWriters) also have an <a class="el" href="classdds_1_1domain_1_1DomainParticipant.html#a1878c1653a026222dac399f4cffefeb2" title="Instructs RTI Connext to locally ignore a remote dds::domain::DomainParticipant.">ignore()</a> method which takes the DomainParticipant and InstanceHandle(s) of the entities that are to be ignored</p>
<ul>
<li>Ignore Topics <div class="fragment"><div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(0);</div>
<div class="line">    <a class="code" href="classdds_1_1topic_1_1Topic.html" title="&lt;&lt;reference-type&gt;&gt; Topic is the most basic description of the data to be published and subscribed...">dds::topic::Topic&lt;Foo&gt;</a> topic1(participant, <span class="stringliteral">&quot;Topic1&quot;</span>);</div>
<div class="line">    <a class="code" href="classdds_1_1topic_1_1Topic.html" title="&lt;&lt;reference-type&gt;&gt; Topic is the most basic description of the data to be published and subscribed...">dds::topic::Topic&lt;Foo&gt;</a> topic2(participant, <span class="stringliteral">&quot;Topic2&quot;</span>);</div>
<div class="line">    <a class="code" href="classdds_1_1topic_1_1Topic.html" title="&lt;&lt;reference-type&gt;&gt; Topic is the most basic description of the data to be published and subscribed...">dds::topic::Topic&lt;Foo&gt;</a> topic3(participant, <span class="stringliteral">&quot;Topic3&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This participant will now ignore this topic</span></div>
<div class="line">    <a class="code" href="namespacedds_1_1topic.html#a5ba2a6029acf87272c417370ceef1b71" title="Instructs a DomainParticipant to ignore a topic.">dds::topic::ignore</a>(participant, topic1.<a class="code" href="classdds_1_1core_1_1Entity.html#aa939658bf27aa3bb20cf5f1acdcd6378" title="Get the instance handle that represents this entity.">instance_handle</a>());</div>
<div class="line"></div>
<div class="line">    <a class="code" href="namespacedds_1_1core.html#a9091ea7961b3e0629207fde8f4737341" title="A sequence of dds::core::InstanceHandle.">dds::core::InstanceHandleSeq</a> handles;</div>
<div class="line">    handles.push_back(topic2.instance_handle());</div>
<div class="line">    handles.push_back(topic3.instance_handle());</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This participant will now ignore the other two topics too</span></div>
<div class="line">    <a class="code" href="namespacedds_1_1topic.html#a5ba2a6029acf87272c417370ceef1b71" title="Instructs a DomainParticipant to ignore a topic.">dds::topic::ignore</a>(participant, handles.begin(), handles.end());</div>
</div><!-- fragment --> </li>
</ul>
<h1><a class="anchor" id="DDSEntityExampleModule_teardown"></a>
Tearing Down An Entity</h1>
<p>The following examples use a DomainParticipant to show the various patterns which exist to tear down an entity, but the same examples can also be applied when shutting down Subscribers, Publishers, DataReaders, DataWriters, and Topics</p>
<ul>
<li>Let all references to a given entity go out-of-scope and let the destructor take care of entity clean up <div class="fragment"><div class="line">{</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Create a participant on domain 0</span></div>
<div class="line">        <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(0);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// found_participant will equal dds::core::null because the participant&#39;s</span></div>
<div class="line">    <span class="comment">// destructor was called when the only reference to it went out of scope</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> found_participant = <a class="code" href="namespacedds_1_1domain.html#ab3f0a4ee170b7486b06670025ed8b9c8" title="Locates an existing dds::domain::DomainParticipant.">dds::domain::find</a>(0);</div>
<div class="line">}</div>
</div><!-- fragment --><br/>
</li>
<li>Explicitly call <a class="el" href="classdds_1_1sub_1_1DataReader.html#a5ae591df94fc66ccb85cbb6565368bca" title="Close this DataReader.">close()</a> on one of the existing references to an Entity <div class="fragment"><div class="line">    <span class="comment">// Create a participant on domain 0</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// All Entities are Reference types, meaning that the assignment operator</span></div>
<div class="line">    <span class="comment">// will not make a copy of the participant, but instead will just create </span></div>
<div class="line">    <span class="comment">// another reference to the previously created participant </span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> same_participant = participant;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Call close() on same_participant to explicitly destroy the participant</span></div>
<div class="line">    same_participant.<a class="code" href="classdds_1_1core_1_1Entity.html#afb9d5bf145ddf0096ca22ad31e0a3e23" title="Forces the destruction of this entity.">close</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span> {</div>
<div class="line">        <span class="comment">// Any attempt to use the closed participant, will cause a </span></div>
<div class="line">        <span class="comment">// dds::core::AlreadyClosedError exception</span></div>
<div class="line">        participant.<a class="code" href="classdds_1_1core_1_1Entity.html#afbb1832f08c711ec6bc3a17e31d1bb97" title="Enables this entity (if it was created disabled)">enable</a>();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="classdds_1_1core_1_1AlreadyClosedError.html" title="Indicates that an object has been closed.">dds::core::AlreadyClosedError</a>&amp; ex) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Expected AlreadyClosedError: &quot;</span> &lt;&lt; ex.<a class="code" href="classdds_1_1core_1_1AlreadyClosedError.html#a5925e76c71d1f6ca9803cf453775a3dc" title="Access the message contained in this AlreadyClosedError exception.">what</a>() &lt;&lt; std::endl;</div>
<div class="line">    }</div>
</div><!-- fragment --><br/>
</li>
<li>Assign <a class="el" href="group__DDSCPP2SupportingTypes.html#ga22c3217bb51dfe3db2887417da74d917" title="Indicates an empty reference.">dds::core::null</a> to the last reference to an Entity <div class="fragment"><div class="line">    <span class="comment">// Create a reference to a null participant</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant1(<a class="code" href="group__DDSCPP2SupportingTypes.html#ga22c3217bb51dfe3db2887417da74d917" title="Indicates an empty reference.">dds::core::null</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Now create a participant on domain 0</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant2(0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Assign participant1 to this valid participant</span></div>
<div class="line">    participant1 = participant2;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Assign dds::core:null to participant2. The participant will not be </span></div>
<div class="line">    <span class="comment">// destroyed because participant1 is still a valid reference</span></div>
<div class="line">    participant2 = <a class="code" href="group__DDSCPP2SupportingTypes.html#ga22c3217bb51dfe3db2887417da74d917" title="Indicates an empty reference.">dds::core::null</a>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// We can still use the participant because participant1 is still a </span></div>
<div class="line">    <span class="comment">// valid reference</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1qos_1_1DomainParticipantQos.html" title="&lt;&lt;value-type&gt;&gt; Container of the QoS policies that a dds::domain::DomainParticipant supports...">dds::domain::qos::DomainParticipantQos</a> qos = </div>
<div class="line">        participant1.<a class="code" href="classdds_1_1domain_1_1DomainParticipant.html#a7b9f643492754355758ee956b745ee08" title="Get the current DomainParticipantQos for this instance.">default_participant_qos</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Assigning dds::core::null to the only remaining reference to the </span></div>
<div class="line">    <span class="comment">// participant will now cause its destructor to be called</span></div>
<div class="line">    participant1 = <a class="code" href="group__DDSCPP2SupportingTypes.html#ga22c3217bb51dfe3db2887417da74d917" title="Indicates an empty reference.">dds::core::null</a>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// found_participant will equal dds::core::null because the previous</span></div>
<div class="line">    <span class="comment">// assignment to dds::core::null caused the participant to be destroyed</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> found_participant = <a class="code" href="namespacedds_1_1domain.html#ab3f0a4ee170b7486b06670025ed8b9c8" title="Locates an existing dds::domain::DomainParticipant.">dds::domain::find</a>(0);</div>
</div><!-- fragment --><br/>
</li>
<li>Retaining and then destroying an Entity <div class="fragment"><div class="line"><span class="keywordtype">void</span> howto_teardown_retain()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// To prevent participant destruction when all references go out of scope </span></div>
<div class="line">    <span class="comment">// you can call retain().</span></div>
<div class="line">    <span class="keyword">const</span> uint32_t domain_id_0 = 0;</div>
<div class="line">    <span class="keyword">const</span> uint32_t domain_id_1 = 1;</div>
<div class="line"></div>
<div class="line">    create_and_retain_participant(domain_id_0, <span class="keyword">false</span>);</div>
<div class="line">    create_and_retain_participant(domain_id_1, <span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// We did not retain the participant with domain_id_0, so the following </span></div>
<div class="line">    <span class="comment">// will result in participant0 == dds::core::null</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant0 = <a class="code" href="namespacedds_1_1domain.html#ab3f0a4ee170b7486b06670025ed8b9c8" title="Locates an existing dds::domain::DomainParticipant.">dds::domain::find</a>(domain_id_0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// We can recover the participant with domain_id_1 using find() because we </span></div>
<div class="line">    <span class="comment">// retained the it. participant1 will be a valid reference to </span></div>
<div class="line">    <span class="comment">// the participant that was created on domain 1</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant1 = <a class="code" href="namespacedds_1_1domain.html#ab3f0a4ee170b7486b06670025ed8b9c8" title="Locates an existing dds::domain::DomainParticipant.">dds::domain::find</a>(domain_id_1);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Because we called retain on the participant, the only way to destroy</span></div>
<div class="line">    <span class="comment">// the participant is to explicitly call close() on a reference to the</span></div>
<div class="line">    <span class="comment">// participant. Any attempt to use the participant after calling </span></div>
<div class="line">    <span class="comment">// close will cause a dds::core::AlreadyClosedError exception to be thrown</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Destroy the participant</span></div>
<div class="line">    participant1.<a class="code" href="classdds_1_1core_1_1Entity.html#afb9d5bf145ddf0096ca22ad31e0a3e23" title="Forces the destruction of this entity.">close</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span> {</div>
<div class="line">        <span class="comment">// This call will cause a dds::core::AlreadyClosedError exception</span></div>
<div class="line">        participant1.<a class="code" href="classdds_1_1core_1_1Entity.html#afbb1832f08c711ec6bc3a17e31d1bb97" title="Enables this entity (if it was created disabled)">enable</a>();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">catch</span> (<a class="code" href="classdds_1_1core_1_1AlreadyClosedError.html" title="Indicates that an object has been closed.">dds::core::AlreadyClosedError</a>&amp; ex) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Expected AlreadyClosedError: &quot;</span> &lt;&lt; ex.<a class="code" href="classdds_1_1core_1_1AlreadyClosedError.html#a5925e76c71d1f6ca9803cf453775a3dc" title="Access the message contained in this AlreadyClosedError exception.">what</a>() &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">     </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> create_and_retain_participant(<span class="keyword">const</span> uint32_t <a class="code" href="classdds_1_1topic_1_1ParticipantBuiltinTopicData.html#a7cab4e5d95dba869f405b93470734a9f" title="&lt;&lt;extension&gt;&gt; Get the domain ID associated with the discovered dds::domain::DomainParticipant.">domain_id</a>, <span class="keywordtype">bool</span> retain)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Create and retain a participant. If retained, the participant will not </span></div>
<div class="line">    <span class="comment">// be destroyed when it goes out of scope and can be retrieved again</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(domain_id);</div>
<div class="line">    <span class="keywordflow">if</span> (retain) {</div>
<div class="line">        participant.<a class="code" href="classdds_1_1core_1_1Entity.html#a19de3f3ffae7901686cf156ad9f1e762" title="Disables the automatic destruction of this entity.">retain</a>();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Connext Modern C++ API Version 5.2.3</A>
Copyright &copy; Wed Apr 27 2016 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
