<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RTI Connext Modern C++ API: DynamicType and DynamicData Use Cases</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RTI Connext Modern C++ API
   &#160;<span id="projectnumber">Version 5.2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2-20120808 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__DDSXTypesExampleModule.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DynamicType and DynamicData Use Cases</div>  </div>
<div class="ingroups"><a class="el" href="group__DDSHowToModule.html">Programming How-To's</a></div></div><!--header-->
<div class="contents">

<p>Using DynamicType and DynamicData.  
<a href="#details">More...</a></p>
<p>Using DynamicType and DynamicData. </p>
<p>The following #includes are needed for the examples on this page </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;dds/core/ddscore.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dds/pub/ddspub.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;dds/sub/ddssub.hpp&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;Foo.hpp&quot;</span></div>
</div><!-- fragment --> <h1><a class="anchor" id="DDSXTypesExampleModule_dynamic_type_creation"></a>
Creating a DynamicType</h1>
<p>In this section we'll see the different ways to create a <a class="el" href="classdds_1_1core_1_1xtypes_1_1DynamicType.html" title="&lt;&lt;value-type&gt;&gt; Represents a runtime type.">dds::core::xtypes::DynamicType</a> that represents the following <a class="el" href="group__DDSTypesModule.html">IDL type</a> <code>MyType:</code> </p>
<div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="classFoo.html" title="A hypothetical topic-type.">Foo</a> {</div>
<div class="line">    <span class="keywordtype">long</span> x; <span class="comment">//@key</span></div>
<div class="line">    <span class="keywordtype">long</span> y;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">struct </span>MyType {</div>
<div class="line">    <span class="keywordtype">long</span> my_long;</div>
<div class="line">    string&lt;512&gt; my_string;</div>
<div class="line">    <a class="code" href="classFoo.html" title="A hypothetical topic-type.">Foo</a> my_foo;</div>
<div class="line">    sequence&lt;long, 10&gt; my_sequence;</div>
<div class="line">    <a class="code" href="classFoo.html" title="A hypothetical topic-type.">Foo</a> my_array[5];</div>
<div class="line">    <a class="code" href="classFoo.html" title="A hypothetical topic-type.">Foo</a> my_optional; <span class="comment">//@Optional</span></div>
<div class="line">};</div>
</div><!-- fragment --> <h2><a class="anchor" id="DDSXTypesExampleModule_dynamic_type_creation_instantiate"></a>
Create a DynamicType by instantiating it and adding members</h2>
<p>(Note this example uses C++11 code that can easily be converted to similar C++03 code)</p>
<div class="fragment"><div class="line"><a class="code" href="classdds_1_1core_1_1xtypes_1_1StructType.html" title="&lt;&lt;value-type&gt;&gt; Represents and IDL struct type">dds::core::xtypes::StructType</a> create_mytype()</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">using namespace </span>dds::core::xtypes;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// First, let&#39;s create Foo. We&#39;re using an initializer_list of Members</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1xtypes_1_1StructType.html" title="&lt;&lt;value-type&gt;&gt; Represents and IDL struct type">StructType</a> foo(</div>
<div class="line">        <span class="stringliteral">&quot;Foo&quot;</span>, {</div>
<div class="line">            <a class="code" href="classdds_1_1core_1_1xtypes_1_1Member.html" title="&lt;&lt;value-type&gt;&gt; Represents a StructType member">Member</a>(<span class="stringliteral">&quot;x&quot;</span>, primitive_type&lt;int32_t&gt;()).<a class="code" href="classdds_1_1core_1_1xtypes_1_1Member.html#aee7d12e28f824410855fdfd1ae41d990" title="Sets the key annotation of a member.">key</a>(<span class="keyword">true</span>),</div>
<div class="line">            <a class="code" href="classdds_1_1core_1_1xtypes_1_1Member.html" title="&lt;&lt;value-type&gt;&gt; Represents a StructType member">Member</a>(<span class="stringliteral">&quot;y&quot;</span>, primitive_type&lt;int32_t&gt;())</div>
<div class="line">        }</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create MyType and add members</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1xtypes_1_1StructType.html" title="&lt;&lt;value-type&gt;&gt; Represents and IDL struct type">StructType</a> mytype(<span class="stringliteral">&quot;MyType&quot;</span>);</div>
<div class="line">    mytype.add_member(<a class="code" href="classdds_1_1core_1_1xtypes_1_1Member.html" title="&lt;&lt;value-type&gt;&gt; Represents a StructType member">Member</a>(<span class="stringliteral">&quot;my_long&quot;</span>, primitive_type&lt;int32_t&gt;()));</div>
<div class="line">    mytype.add_member(<a class="code" href="classdds_1_1core_1_1xtypes_1_1Member.html" title="&lt;&lt;value-type&gt;&gt; Represents a StructType member">Member</a>(<span class="stringliteral">&quot;my_string&quot;</span>, <a class="code" href="classdds_1_1core_1_1xtypes_1_1StringType.html" title="&lt;&lt;value-type&gt;&gt; Represents an IDL string type.">StringType</a>(512)));</div>
<div class="line">    mytype.add_member(<a class="code" href="classdds_1_1core_1_1xtypes_1_1Member.html" title="&lt;&lt;value-type&gt;&gt; Represents a StructType member">Member</a>(<span class="stringliteral">&quot;my_foo&quot;</span>, foo));</div>
<div class="line">    mytype.add_member(<a class="code" href="classdds_1_1core_1_1xtypes_1_1Member.html" title="&lt;&lt;value-type&gt;&gt; Represents a StructType member">Member</a>(<span class="stringliteral">&quot;my_sequence&quot;</span>, <a class="code" href="classdds_1_1core_1_1xtypes_1_1SequenceType.html" title="&lt;&lt;value-type&gt;&gt; Represents an IDL sequence type.">SequenceType</a>(primitive_type&lt;int32_t&gt;(), 10)));</div>
<div class="line">    mytype.add_member(<a class="code" href="classdds_1_1core_1_1xtypes_1_1Member.html" title="&lt;&lt;value-type&gt;&gt; Represents a StructType member">Member</a>(<span class="stringliteral">&quot;my_array&quot;</span>, <a class="code" href="classdds_1_1core_1_1xtypes_1_1ArrayType.html" title="&lt;&lt;value-type&gt;&gt; Represents an IDL array type.">ArrayType</a>(foo, 5)));</div>
<div class="line">    mytype.add_member(<a class="code" href="classdds_1_1core_1_1xtypes_1_1Member.html" title="&lt;&lt;value-type&gt;&gt; Represents a StructType member">Member</a>(<span class="stringliteral">&quot;my_optional&quot;</span>, foo).optional(<span class="keyword">true</span>));</div>
<div class="line"></div>
<div class="line">    <a class="code" href="namespacerti_1_1core_1_1xtypes.html#a2de52806c988af852002ef0ccbf1f924" title="&lt;&lt;extension&gt;&gt; Prints the IDL representation of this type to the standard output">rti::core::xtypes::print_idl</a>(mytype);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> mytype;</div>
<div class="line">}</div>
</div><!-- fragment --> <h2><a class="anchor" id="DDSXTypesExampleModule_dynamic_type_creation_xml"></a>
Create a DynamicType from an XML description</h2>
<p>We can define the type in this XML file, MyType.xml:</p>
<div class="fragment"><div class="line">&lt;dds xmlns:xsi=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> </div>
<div class="line">     xsi:noNamespaceSchemaLocation=<span class="stringliteral">&quot;rti_dds_qos_profiles.xsd&quot;</span>&gt;</div>
<div class="line">   &lt;type_library name=<span class="stringliteral">&quot;MyTypes&quot;</span>&gt;</div>
<div class="line">       &lt;<span class="keyword">struct </span>name= <span class="stringliteral">&quot;Foo&quot;</span>&gt;</div>
<div class="line">          &lt;member name=<span class="stringliteral">&quot;x&quot;</span> <a class="code" href="classdds_1_1topic_1_1PublicationBuiltinTopicData.html#aa4af5c32e3bc413bd263b709c367631d" title="&lt;&lt;extension&gt;&gt; Get the type">type</a>=<span class="stringliteral">&quot;long&quot;</span> key=<span class="stringliteral">&quot;true&quot;</span>/&gt;</div>
<div class="line">          &lt;member name=<span class="stringliteral">&quot;y&quot;</span> <a class="code" href="classdds_1_1topic_1_1PublicationBuiltinTopicData.html#aa4af5c32e3bc413bd263b709c367631d" title="&lt;&lt;extension&gt;&gt; Get the type">type</a>=<span class="stringliteral">&quot;long&quot;</span>/&gt;</div>
<div class="line">       &lt;/<span class="keyword">struct</span>&gt;</div>
<div class="line">       &lt;<span class="keyword">struct </span>name= <span class="stringliteral">&quot;MyType&quot;</span>&gt;</div>
<div class="line">          &lt;member name=<span class="stringliteral">&quot;my_long&quot;</span> <a class="code" href="classdds_1_1topic_1_1PublicationBuiltinTopicData.html#aa4af5c32e3bc413bd263b709c367631d" title="&lt;&lt;extension&gt;&gt; Get the type">type</a>=<span class="stringliteral">&quot;long&quot;</span>/&gt;</div>
<div class="line">          &lt;member name=<span class="stringliteral">&quot;my_string&quot;</span> stringMaxLength=<span class="stringliteral">&quot;512&quot;</span> <a class="code" href="classdds_1_1topic_1_1PublicationBuiltinTopicData.html#aa4af5c32e3bc413bd263b709c367631d" title="&lt;&lt;extension&gt;&gt; Get the type">type</a>=<span class="stringliteral">&quot;string&quot;</span>/&gt;</div>
<div class="line">          &lt;member name=<span class="stringliteral">&quot;my_foo&quot;</span> <a class="code" href="classdds_1_1topic_1_1PublicationBuiltinTopicData.html#aa4af5c32e3bc413bd263b709c367631d" title="&lt;&lt;extension&gt;&gt; Get the type">type</a>=<span class="stringliteral">&quot;nonBasic&quot;</span>  nonBasicTypeName=<span class="stringliteral">&quot;Foo&quot;</span>/&gt;</div>
<div class="line">          &lt;member name=<span class="stringliteral">&quot;my_sequence&quot;</span> sequenceMaxLength=<span class="stringliteral">&quot;10&quot;</span> <span class="keywordtype">id</span>=<span class="stringliteral">&quot;3&quot;</span> <a class="code" href="classdds_1_1topic_1_1PublicationBuiltinTopicData.html#aa4af5c32e3bc413bd263b709c367631d" title="&lt;&lt;extension&gt;&gt; Get the type">type</a>=<span class="stringliteral">&quot;long&quot;</span>/&gt;</div>
<div class="line">          &lt;member name=<span class="stringliteral">&quot;my_array&quot;</span> <a class="code" href="classdds_1_1topic_1_1PublicationBuiltinTopicData.html#aa4af5c32e3bc413bd263b709c367631d" title="&lt;&lt;extension&gt;&gt; Get the type">type</a>=<span class="stringliteral">&quot;nonBasic&quot;</span>  nonBasicTypeName=<span class="stringliteral">&quot;Foo&quot;</span> arrayDimensions=<span class="stringliteral">&quot;5&quot;</span>/&gt;</div>
<div class="line">          &lt;member name=<span class="stringliteral">&quot;my_optional&quot;</span> <a class="code" href="classdds_1_1topic_1_1PublicationBuiltinTopicData.html#aa4af5c32e3bc413bd263b709c367631d" title="&lt;&lt;extension&gt;&gt; Get the type">type</a>=<span class="stringliteral">&quot;nonBasic&quot;</span> nonBasicTypeName= <span class="stringliteral">&quot;Foo&quot;</span> optional=<span class="stringliteral">&quot;true&quot;</span>/&gt;</div>
<div class="line">       &lt;/<span class="keyword">struct</span>&gt;</div>
<div class="line">   &lt;/type_library&gt; </div>
<div class="line">&lt;/dds&gt;</div>
</div><!-- fragment --><p>And then load it as follows:</p>
<div class="fragment"><div class="line">    <span class="keyword">using namespace </span>dds::core::xtypes;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create a QosProvider (or use the default one)</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1QosProvider.html" title="&lt;&lt;reference-type&gt;&gt; The QosProvider class provides a way for a user to control and access the XML QoS ...">dds::core::QosProvider</a> qos_provider(<span class="stringliteral">&quot;path/to/MyType.xml&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get the type MyType in the type library MyTypes</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicType.html" title="&lt;&lt;value-type&gt;&gt; Represents a runtime type.">DynamicType</a>&amp; mytype = qos_provider-&gt;type(<span class="stringliteral">&quot;MyTypes&quot;</span>, <span class="stringliteral">&quot;MyType&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Downcast to StructType if needed</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="classdds_1_1core_1_1xtypes_1_1StructType.html" title="&lt;&lt;value-type&gt;&gt; Represents and IDL struct type">StructType</a>&amp; mytype_struct = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classdds_1_1core_1_1xtypes_1_1StructType.html" title="&lt;&lt;value-type&gt;&gt; Represents and IDL struct type">StructType</a>&amp;<span class="keyword">&gt;</span>(mytype);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="namespacerti_1_1core_1_1xtypes.html#a2de52806c988af852002ef0ccbf1f924" title="&lt;&lt;extension&gt;&gt; Prints the IDL representation of this type to the standard output">rti::core::xtypes::print_idl</a>(mytype);</div>
<div class="line"></div>
</div><!-- fragment --> <dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__DDSQosProviderExampleModule.html">Qos Provider Use Cases</a></dd></dl>
<h2><a class="anchor" id="DDSXTypesExampleModule_dynamic_type_creation_idl"></a>
Get the DynamicType from its equivalent IDL-generated type</h2>
<p><em><a class="el" href="group__DDSCpp2Conventions.html#a_st_ext">&lt;&lt;extension&gt;&gt;</a></em> When we have the IDL type definition at hand, obtaining its equivalent DynamicType is as simple as:</p>
<div class="fragment"><div class="line">    <span class="keyword">const</span> <a class="code" href="classdds_1_1core_1_1xtypes_1_1StructType.html" title="&lt;&lt;value-type&gt;&gt; Represents and IDL struct type">dds::core::xtypes::StructType</a>&amp; mytype = <a class="code" href="structrti_1_1topic_1_1dynamic__type.html" title="Provides a DynamicType that represents an IDL-generated type.">rti::topic::dynamic_type&lt;MyType&gt;::get</a>();</div>
<div class="line"></div>
<div class="line">    <a class="code" href="namespacerti_1_1core_1_1xtypes.html#a2de52806c988af852002ef0ccbf1f924" title="&lt;&lt;extension&gt;&gt; Prints the IDL representation of this type to the standard output">rti::core::xtypes::print_idl</a>(mytype);</div>
<div class="line"></div>
</div><!-- fragment --> <h2><a class="anchor" id="DDSXTypesExampleModule_dynamic_type_creation_tuples"></a>
Create a DynamicType using tuples</h2>
<p><em><a class="el" href="group__DDSCpp2Conventions.html#a_st_cpp11">&lt;&lt;C++11&gt;&gt;</a></em> <em><a class="el" href="group__DDSCpp2Conventions.html#a_st_exp">&lt;&lt;experimental&gt;&gt;</a></em> <em><a class="el" href="group__DDSCpp2Conventions.html#a_st_ext">&lt;&lt;extension&gt;&gt;</a></em> Note this code requires the additional header <code>&lt;rti/core/xtypes/DynamicDataTuples.hpp&gt;</code>.</p>
<p>Since this feature only supports structures containing primitive types or strings, we'll create the following simpler IDL type:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>MyOtherType {</div>
<div class="line">    <span class="keywordtype">long</span> m1;</div>
<div class="line">    <span class="keywordtype">double</span> m2;</div>
<div class="line">    <span class="keywordtype">string</span> m3;</div>
<div class="line">};</div>
</div><!-- fragment --><p> We can create the type in a single line:</p>
<div class="fragment"><div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1xtypes_1_1StructType.html" title="&lt;&lt;value-type&gt;&gt; Represents and IDL struct type">dds::core::xtypes::StructType</a> mytype = <a class="code" href="namespacerti_1_1core_1_1xtypes.html#a16e82dfb1b7d0179fea9b75e84b3bae6" title="&lt;&lt;C++11&gt;&gt; &lt;&lt;experimental&gt;&gt; &lt;&lt;extension&gt;&gt; Creates a StructType from a list of types or a std::tuple...">rti::core::xtypes::create_type_from_tuple</a>&lt;</div>
<div class="line">            int32_t, double, <a class="code" href="group__DDSCPP2SupportingTypes.html#gad310659fde3bf0bf1bf71a0a50abbfa2" title="A string convertible to std::string and with similar functionality.">std::string</a>&gt;(<span class="stringliteral">&quot;MyOtherType&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="namespacerti_1_1core_1_1xtypes.html#a2de52806c988af852002ef0ccbf1f924" title="&lt;&lt;extension&gt;&gt; Prints the IDL representation of this type to the standard output">rti::core::xtypes::print_idl</a>(mytype);</div>
<div class="line"></div>
</div><!-- fragment --><p> For convenience, we can also use a <code>std::tuple</code>, which allows us to typedef it:</p>
<div class="fragment"><div class="line"></div>
<div class="line">    <span class="keyword">typedef</span> std::tuple&lt;int32_t, double, std::string&gt; MyOtherTypeTuple;</div>
<div class="line"></div>
<div class="line">    mytype = rti::core::xtypes::create_type_from_tuple&lt;MyOtherTypeTuple&gt;(<span class="stringliteral">&quot;MyOtherType&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="namespacerti_1_1core_1_1xtypes.html#a2de52806c988af852002ef0ccbf1f924" title="&lt;&lt;extension&gt;&gt; Prints the IDL representation of this type to the standard output">rti::core::xtypes::print_idl</a>(mytype);</div>
<div class="line"></div>
</div><!-- fragment --> <h1><a class="anchor" id="DDSXTypesExampleModule_dynamic_data"></a>
Using DynamicData</h1>
<p>Now that we know how to create a DynamicType, we will see how to use DynamicData to publish and subscribe to data that we can manipulate reflectively.</p>
<p>We will use the DynamicType that we <a class="el" href="group__DDSXTypesExampleModule.html#DDSXTypesExampleModule_dynamic_type_creation">created before</a>.</p>
<h2><a class="anchor" id="DDSXTypesExampleModule_dynamic_data_publication"></a>
Publishing data using DynamicData</h2>
<p>Make sure you are already familiar with the regular <a class="el" href="group__DDSProducerExampleModule.html">publication example</a>.</p>
<p>Unlike the regular publication example, using dynamic data we can write code where the type is unknown at compilation type.</p>
<div class="fragment"><div class="line">    <span class="keyword">using namespace </span>dds::core::xtypes;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1xtypes_1_1StructType.html" title="&lt;&lt;value-type&gt;&gt; Represents and IDL struct type">StructType</a> mytype = create_mytype(); <span class="comment">// create the type as we saw before</span></div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// The template parameter is DynamicData. The third argument is the</span></div>
<div class="line">    <span class="comment">// DynamicType, instead of the type name.</span></div>
<div class="line">    <a class="code" href="classdds_1_1topic_1_1Topic.html" title="&lt;&lt;reference-type&gt;&gt; Topic is the most basic description of the data to be published and subscribed...">dds::topic::Topic&lt;DynamicData&gt;</a> topic(participant, <span class="stringliteral">&quot;MyTopic&quot;</span>, mytype);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1pub_1_1DataWriter.html" title="&lt;&lt;reference-type&gt;&gt; Allows an application to publish data for a dds::topic::Topic">dds::pub::DataWriter&lt;DynamicData&gt;</a> writer(<a class="code" href="classdds_1_1pub_1_1Publisher.html" title="&lt;&lt;reference-type&gt;&gt; A publisher is the object responsible for the actual dissemination of publications...">dds::pub::Publisher</a>(participant), topic);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create a data sample and assign its values</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html" title="&lt;&lt;value-type&gt;&gt; A data sample of any complex data type, which can be inspected and manipulated reflect...">DynamicData</a> sample(mytype);</div>
<div class="line"></div>
<div class="line">    sample.value(<span class="stringliteral">&quot;my_long&quot;</span>, 23); <span class="comment">// my_long = 23</span></div>
<div class="line">    sample.value&lt;<a class="code" href="group__DDSCPP2SupportingTypes.html#gad310659fde3bf0bf1bf71a0a50abbfa2" title="A string convertible to std::string and with similar functionality.">std::string</a>&gt;(<span class="stringliteral">&quot;my_string&quot;</span>, <span class="stringliteral">&quot;hello&quot;</span>); <span class="comment">// my_string = hello</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// To set my_foo we have two options:</span></div>
<div class="line">    <span class="comment">// 1) Create a new DynamicData and assing it:</span></div>
<div class="line">    <span class="comment">// We can get the DynamicType of Foo from MyType::my_foo</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html" title="&lt;&lt;value-type&gt;&gt; A data sample of any complex data type, which can be inspected and manipulated reflect...">DynamicData</a> foo_data(mytype.<a class="code" href="classdds_1_1core_1_1xtypes_1_1AbstractConstructedType.html#a9a842a685b4ee1f695639f3963e67b35" title="Gets a member by its index.">member</a>(<span class="stringliteral">&quot;my_foo&quot;</span>).<a class="code" href="classdds_1_1core_1_1xtypes_1_1Member.html#aa4fd75c4cd8c9ec3a37481f89103ef65" title="Gets the member type.">type</a>());</div>
<div class="line">    foo_data.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1e04bf6c8e63a43060a171153273c60f" title="Sets the value of a member by member name.">value</a>(<span class="stringliteral">&quot;x&quot;</span>, 1);</div>
<div class="line">    foo_data.value(<span class="stringliteral">&quot;y&quot;</span>, 2);</div>
<div class="line">    sample.value(<span class="stringliteral">&quot;my_foo&quot;</span>, foo_data);</div>
<div class="line">    <span class="comment">// 2) Obtain the loaned member and assign its values</span></div>
<div class="line">    <a class="code" href="classrti_1_1core_1_1xtypes_1_1LoanedDynamicData.html" title="&lt;&lt;move-only-type&gt;&gt; Gives temporary access to a member of another DynamicData object.">rti::core::xtypes::LoanedDynamicData</a> loaned_member = sample.loan_value(<span class="stringliteral">&quot;my_foo&quot;</span>);</div>
<div class="line">    loaned_member.<a class="code" href="classrti_1_1core_1_1xtypes_1_1LoanedDynamicData.html#aa3af5cb8c0d55670bde3dd332c390afa" title="Obtains the loaned DynamicData object representing a member of DynamicData object.">get</a>().<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1e04bf6c8e63a43060a171153273c60f" title="Sets the value of a member by member name.">value</a>(<span class="stringliteral">&quot;x&quot;</span>, 2);</div>
<div class="line">    loaned_member.get().value(<span class="stringliteral">&quot;y&quot;</span>, 3);</div>
<div class="line">    loaned_member.return_loan(); <span class="comment">// The destructor would do this as well.</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// To set the values of my_sequence we can use a vector</span></div>
<div class="line">    std::vector&lt;int32_t&gt; sequence_values;</div>
<div class="line">    sequence_values.push_back(10);</div>
<div class="line">    sequence_values.push_back(20);</div>
<div class="line">    sequence_values.push_back(30);</div>
<div class="line">    sample.set_values(<span class="stringliteral">&quot;my_sequence&quot;</span>, sequence_values);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// To set the values of my_array, since the element type is another struct</span></div>
<div class="line">    <span class="comment">// we will use a LoanedDynamicData to access the array elements. To modify</span></div>
<div class="line">    <span class="comment">// each element we will use another LoanedDynamicData</span></div>
<div class="line"></div>
<div class="line">    loaned_member = sample.loan_value(<span class="stringliteral">&quot;my_array&quot;</span>);</div>
<div class="line">    <a class="code" href="classrti_1_1core_1_1xtypes_1_1LoanedDynamicData.html" title="&lt;&lt;move-only-type&gt;&gt; Gives temporary access to a member of another DynamicData object.">rti::core::xtypes::LoanedDynamicData</a> array_element = loaned_member.<a class="code" href="classrti_1_1core_1_1xtypes_1_1LoanedDynamicData.html#aa3af5cb8c0d55670bde3dd332c390afa" title="Obtains the loaned DynamicData object representing a member of DynamicData object.">get</a>().<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a99e2b4fec89d14b71fe5f55638b5766f" title="Gets a view of a complex member.">loan_value</a>(1);</div>
<div class="line">    array_element.get().value(<span class="stringliteral">&quot;x&quot;</span>, 10);</div>
<div class="line">    array_element.get().value(<span class="stringliteral">&quot;y&quot;</span>, 11);</div>
<div class="line">    loaned_member.get().loan_value(array_element, 2); <span class="comment">// reuse array_element</span></div>
<div class="line">    array_element.get().value(<span class="stringliteral">&quot;x&quot;</span>, 20);</div>
<div class="line">    array_element.get().value(<span class="stringliteral">&quot;y&quot;</span>, 21);</div>
<div class="line">    array_element.return_loan();</div>
<div class="line">    loaned_member.return_loan();</div>
<div class="line">    <span class="comment">// We&#39;re not setting the remaining 3 elements, so they will have default values</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// We manipulate optional members as regular members. By setting a value</span></div>
<div class="line">    <span class="comment">// we are implicitly asserting its presence in the sample.</span></div>
<div class="line">    sample.value(<span class="stringliteral">&quot;my_optional&quot;</span>, foo_data);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// This is how we can unset it:</span></div>
<div class="line">    sample.clear_optional_member(<span class="stringliteral">&quot;my_optional&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Finally we just write the sample</span></div>
<div class="line">    writer.write(sample);</div>
<div class="line"></div>
<div class="line">    std::cout &lt;&lt; sample &lt;&lt; std::endl;</div>
<div class="line"></div>
</div><!-- fragment --> <h2><a class="anchor" id="DDSXTypesExampleModule_dynamic_data_subscription"></a>
Subscribing to data using DynamicData</h2>
<div class="fragment"><div class="line">    <span class="keyword">using namespace </span>dds::core::xtypes;</div>
<div class="line">    <span class="keyword">using namespace </span>rti::core::xtypes;</div>
<div class="line">    <span class="keyword">using namespace </span>std; <span class="comment">// for cout and endl</span></div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1xtypes_1_1StructType.html" title="&lt;&lt;value-type&gt;&gt; Represents and IDL struct type">StructType</a> mytype = create_mytype(); <span class="comment">// create the type as we saw before</span></div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(0);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// The template parameter is DynamicData. The third argument is the</span></div>
<div class="line">    <span class="comment">// DynamicType, instead of the type name.</span></div>
<div class="line">    <a class="code" href="classdds_1_1topic_1_1Topic.html" title="&lt;&lt;reference-type&gt;&gt; Topic is the most basic description of the data to be published and subscribed...">dds::topic::Topic&lt;DynamicData&gt;</a> topic(participant, <span class="stringliteral">&quot;MyTopic&quot;</span>, mytype);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1sub_1_1DataReader.html" title="&lt;&lt;reference-type&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">dds::sub::DataReader&lt;DynamicData&gt;</a> reader(<a class="code" href="classdds_1_1sub_1_1Subscriber.html" title="&lt;&lt;reference-type&gt;&gt; A subscriber is the object responsible for actually receiving data from a subscrip...">dds::sub::Subscriber</a>(participant), topic);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Read/take samples normally</span></div>
<div class="line">    <a class="code" href="classdds_1_1sub_1_1LoanedSamples.html" title="&lt;&lt;move-only-type&gt;&gt; Provides temporary access to a collection of samples from a DataReader.">dds::sub::LoanedSamples&lt;DynamicData&gt;</a> samples = reader.take();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> sample : samples) {</div>
<div class="line">        <span class="keywordflow">if</span> (sample.info().valid()) {</div>
<div class="line">            <a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html" title="&lt;&lt;value-type&gt;&gt; A data sample of any complex data type, which can be inspected and manipulated reflect...">DynamicData</a>&amp; data = <span class="keyword">const_cast&lt;</span><a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html" title="&lt;&lt;value-type&gt;&gt; A data sample of any complex data type, which can be inspected and manipulated reflect...">DynamicData</a>&amp;<span class="keyword">&gt;</span>(sample.data());</div>
<div class="line">            cout &lt;&lt; data.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1e04bf6c8e63a43060a171153273c60f" title="Sets the value of a member by member name.">value</a>&lt;int32_t&gt;(<span class="stringliteral">&quot;my_long&quot;</span>) &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">            <span class="comment">// To inspect a complex member we can get a copy of it:</span></div>
<div class="line">            <a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html" title="&lt;&lt;value-type&gt;&gt; A data sample of any complex data type, which can be inspected and manipulated reflect...">DynamicData</a> foo_copy = data.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1e04bf6c8e63a43060a171153273c60f" title="Sets the value of a member by member name.">value</a>&lt;<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html" title="&lt;&lt;value-type&gt;&gt; A data sample of any complex data type, which can be inspected and manipulated reflect...">DynamicData</a>&gt;(<span class="stringliteral">&quot;my_foo&quot;</span>);</div>
<div class="line">            cout &lt;&lt; foo_copy.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1e04bf6c8e63a43060a171153273c60f" title="Sets the value of a member by member name.">value</a>&lt;int32_t&gt;(<span class="stringliteral">&quot;x&quot;</span>) &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Or a loan:</span></div>
<div class="line">            <a class="code" href="classrti_1_1core_1_1xtypes_1_1LoanedDynamicData.html" title="&lt;&lt;move-only-type&gt;&gt; Gives temporary access to a member of another DynamicData object.">LoanedDynamicData</a> loaned_member = data.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a99e2b4fec89d14b71fe5f55638b5766f" title="Gets a view of a complex member.">loan_value</a>(<span class="stringliteral">&quot;my_foo&quot;</span>);</div>
<div class="line">            cout &lt;&lt; loaned_member.get().value&lt;int32_t&gt;(<span class="stringliteral">&quot;y&quot;</span>) &lt;&lt; endl;</div>
<div class="line">            loaned_member.return_loan(); <span class="comment">// Note: the destructor also returns the loan if needed</span></div>
<div class="line"></div>
<div class="line">            <span class="comment">// Note that we could have taken advantage of the destructor to save</span></div>
<div class="line">            <span class="comment">// the call to return_loan:</span></div>
<div class="line">            cout &lt;&lt; data.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a99e2b4fec89d14b71fe5f55638b5766f" title="Gets a view of a complex member.">loan_value</a>(<span class="stringliteral">&quot;my_foo&quot;</span>).get().value&lt;int32_t&gt;(<span class="stringliteral">&quot;y&quot;</span>) &lt;&lt; endl;</div>
<div class="line"></div>
<div class="line">            <span class="comment">// To get the values of my_sequence we can use a vector:</span></div>
<div class="line">            std::vector&lt;int32_t&gt; sequence_values = data.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1fdab6d7fbf765270fa4de2b42f27823" title="Obtains the values of an array or sequence member by member name.">get_values</a>&lt;int32_t&gt;(<span class="stringliteral">&quot;my_sequence&quot;</span>);</div>
<div class="line">            <span class="comment">// We could also have reused a vector:</span></div>
<div class="line">            data.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1fdab6d7fbf765270fa4de2b42f27823" title="Obtains the values of an array or sequence member by member name.">get_values</a>(<span class="stringliteral">&quot;my_sequence&quot;</span>, sequence_values);</div>
<div class="line"></div>
<div class="line">            <span class="comment">// To get the values of my_array, since the element type is another</span></div>
<div class="line">            <span class="comment">// struct we will use a LoanedDynamicData to access the array</span></div>
<div class="line">            <span class="comment">// elements.</span></div>
<div class="line">            loaned_member = data.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a99e2b4fec89d14b71fe5f55638b5766f" title="Gets a view of a complex member.">loan_value</a>(<span class="stringliteral">&quot;my_array&quot;</span>); <span class="comment">// Note: this move-assignment only works in C++11</span></div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt;= loaned_member.get().member_count(); i++) {</div>
<div class="line">                <a class="code" href="classrti_1_1core_1_1xtypes_1_1LoanedDynamicData.html" title="&lt;&lt;move-only-type&gt;&gt; Gives temporary access to a member of another DynamicData object.">LoanedDynamicData</a> array_element = loaned_member.<a class="code" href="classrti_1_1core_1_1xtypes_1_1LoanedDynamicData.html#aa3af5cb8c0d55670bde3dd332c390afa" title="Obtains the loaned DynamicData object representing a member of DynamicData object.">get</a>().<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a99e2b4fec89d14b71fe5f55638b5766f" title="Gets a view of a complex member.">loan_value</a>(i);</div>
<div class="line">                cout &lt;&lt; array_element.<a class="code" href="classrti_1_1core_1_1xtypes_1_1LoanedDynamicData.html#aa3af5cb8c0d55670bde3dd332c390afa" title="Obtains the loaned DynamicData object representing a member of DynamicData object.">get</a>().<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1e04bf6c8e63a43060a171153273c60f" title="Sets the value of a member by member name.">value</a>&lt;int32_t&gt;(<span class="stringliteral">&quot;x&quot;</span>) &lt;&lt; endl;</div>
<div class="line">                cout &lt;&lt; array_element.<a class="code" href="classrti_1_1core_1_1xtypes_1_1LoanedDynamicData.html#aa3af5cb8c0d55670bde3dd332c390afa" title="Obtains the loaned DynamicData object representing a member of DynamicData object.">get</a>().<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1e04bf6c8e63a43060a171153273c60f" title="Sets the value of a member by member name.">value</a>&lt;int32_t&gt;(<span class="stringliteral">&quot;y&quot;</span>) &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// When getting an unset optional member, value() will throw</span></div>
<div class="line">            <span class="comment">// dds::core::InvalidArgumentError, but we can check if it&#39;s set:</span></div>
<div class="line">            <span class="keywordflow">if</span> (data.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1f5f7d6e112cadd871bd4701530e104a" title="Determines if an optional member is set by member name.">member_exists</a>(<span class="stringliteral">&quot;my_optional&quot;</span>)) {</div>
<div class="line">                foo_copy = data.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1e04bf6c8e63a43060a171153273c60f" title="Sets the value of a member by member name.">value</a>&lt;<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html" title="&lt;&lt;value-type&gt;&gt; A data sample of any complex data type, which can be inspected and manipulated reflect...">DynamicData</a>&gt;(<span class="stringliteral">&quot;my_optional&quot;</span>);</div>
<div class="line">                cout &lt;&lt; foo_copy.<a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html#a1e04bf6c8e63a43060a171153273c60f" title="Sets the value of a member by member name.">value</a>&lt;int32_t&gt;(<span class="stringliteral">&quot;x&quot;</span>) &lt;&lt; endl;</div>
<div class="line">                cout &lt;&lt; foo_copy.value&lt;int32_t&gt;(<span class="stringliteral">&quot;y&quot;</span>) &lt;&lt; endl;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;my_optional is not set&quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
</div><!-- fragment --> <h2><a class="anchor" id="DDSXTypesExampleModule_dynamic_data_tuples"></a>
Manipulating data reflectively using C++ tuples</h2>
<p><em><a class="el" href="group__DDSCpp2Conventions.html#a_st_cpp11">&lt;&lt;C++11&gt;&gt;</a></em> <em><a class="el" href="group__DDSCpp2Conventions.html#a_st_exp">&lt;&lt;experimental&gt;&gt;</a></em> <em><a class="el" href="group__DDSCpp2Conventions.html#a_st_ext">&lt;&lt;extension&gt;&gt;</a></em></p>
<p>This feature allows publishing and subscribing to simple data types without code generation and directly using C++ types instead of the DynamicData getters and setters.</p>
<p>This is an example publisher:</p>
<div class="fragment"><div class="line">    <span class="keyword">using namespace </span>dds::core::xtypes;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create the type</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1xtypes_1_1StructType.html" title="&lt;&lt;value-type&gt;&gt; Represents and IDL struct type">StructType</a> mytype = <a class="code" href="namespacerti_1_1core_1_1xtypes.html#a16e82dfb1b7d0179fea9b75e84b3bae6" title="&lt;&lt;C++11&gt;&gt; &lt;&lt;experimental&gt;&gt; &lt;&lt;extension&gt;&gt; Creates a StructType from a list of types or a std::tuple...">rti::core::xtypes::create_type_from_tuple</a>&lt;</div>
<div class="line">        int32_t, double, <a class="code" href="group__DDSCPP2SupportingTypes.html#gad310659fde3bf0bf1bf71a0a50abbfa2" title="A string convertible to std::string and with similar functionality.">std::string</a>&gt;(<span class="stringliteral">&quot;MyType&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create participant, topic and writer</span></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(0);</div>
<div class="line">    <a class="code" href="classdds_1_1topic_1_1Topic.html" title="&lt;&lt;reference-type&gt;&gt; Topic is the most basic description of the data to be published and subscribed...">dds::topic::Topic&lt;DynamicData&gt;</a> topic(participant, <span class="stringliteral">&quot;MyTopic&quot;</span>, mytype);</div>
<div class="line">    <a class="code" href="classdds_1_1pub_1_1DataWriter.html" title="&lt;&lt;reference-type&gt;&gt; Allows an application to publish data for a dds::topic::Topic">dds::pub::DataWriter&lt;DynamicData&gt;</a> writer(<a class="code" href="classdds_1_1pub_1_1Publisher.html" title="&lt;&lt;reference-type&gt;&gt; A publisher is the object responsible for the actual dissemination of publications...">dds::pub::Publisher</a>(participant), topic);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create a data sample and assign its values</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1xtypes_1_1DynamicData.html" title="&lt;&lt;value-type&gt;&gt; A data sample of any complex data type, which can be inspected and manipulated reflect...">DynamicData</a> sample(mytype);</div>
<div class="line">    <a class="code" href="namespacerti_1_1core_1_1xtypes.html#a4768e61d14b1ec1c6f7d764f58f37902" title="&lt;&lt;C++11&gt;&gt; &lt;&lt;experimental&gt;&gt; &lt;&lt;extension&gt;&gt; Assigns the values of a std::tuple to a DynamicData object a...">rti::core::xtypes::set_tuple</a>(</div>
<div class="line">        sample, std::make_tuple(10, 50.5, <a class="code" href="group__DDSCPP2SupportingTypes.html#gad310659fde3bf0bf1bf71a0a50abbfa2" title="A string convertible to std::string and with similar functionality.">std::string</a>(<span class="stringliteral">&quot;Hello&quot;</span>)));</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Write the sample</span></div>
<div class="line">    writer.write(sample);</div>
<div class="line"></div>
<div class="line">    std::cout &lt;&lt; sample &lt;&lt; std::endl;</div>
<div class="line"></div>
</div><!-- fragment --><p> And this is a subscriber:</p>
<div class="fragment"><div class="line">    <span class="keyword">using namespace </span>dds::core::xtypes;</div>
<div class="line">    <span class="keyword">using namespace </span>rti::core::xtypes;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create the type</span></div>
<div class="line">    <a class="code" href="classdds_1_1core_1_1xtypes_1_1StructType.html" title="&lt;&lt;value-type&gt;&gt; Represents and IDL struct type">StructType</a> mytype = <a class="code" href="namespacerti_1_1core_1_1xtypes.html#a16e82dfb1b7d0179fea9b75e84b3bae6" title="&lt;&lt;C++11&gt;&gt; &lt;&lt;experimental&gt;&gt; &lt;&lt;extension&gt;&gt; Creates a StructType from a list of types or a std::tuple...">rti::core::xtypes::create_type_from_tuple</a>&lt;</div>
<div class="line">        int32_t, double, <a class="code" href="group__DDSCPP2SupportingTypes.html#gad310659fde3bf0bf1bf71a0a50abbfa2" title="A string convertible to std::string and with similar functionality.">std::string</a>&gt;(<span class="stringliteral">&quot;MyType&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classdds_1_1domain_1_1DomainParticipant.html" title="&lt;&lt;reference-type&gt;&gt; Container for all dds::core::Entity objects.">dds::domain::DomainParticipant</a> participant(0);</div>
<div class="line">    <a class="code" href="classdds_1_1topic_1_1Topic.html" title="&lt;&lt;reference-type&gt;&gt; Topic is the most basic description of the data to be published and subscribed...">dds::topic::Topic&lt;DynamicData&gt;</a> topic(participant, <span class="stringliteral">&quot;MyTopic&quot;</span>, mytype);</div>
<div class="line">    <a class="code" href="classdds_1_1sub_1_1DataReader.html" title="&lt;&lt;reference-type&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">dds::sub::DataReader&lt;DynamicData&gt;</a> reader(<a class="code" href="classdds_1_1sub_1_1Subscriber.html" title="&lt;&lt;reference-type&gt;&gt; A subscriber is the object responsible for actually receiving data from a subscrip...">dds::sub::Subscriber</a>(participant), topic);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Read/take samples normally</span></div>
<div class="line">    <a class="code" href="classdds_1_1sub_1_1LoanedSamples.html" title="&lt;&lt;move-only-type&gt;&gt; Provides temporary access to a collection of samples from a DataReader.">dds::sub::LoanedSamples&lt;DynamicData&gt;</a> samples = reader.take();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> sample : samples) {</div>
<div class="line">        <span class="keywordflow">if</span> (sample.info().valid()) {</div>
<div class="line">            <span class="comment">// We obtain a std::tuple from the DynamicData sample</span></div>
<div class="line">            <span class="keyword">auto</span> my_tuple =  <a class="code" href="namespacerti_1_1core_1_1xtypes.html#af448069e4f114ee70d39b99616242ed6" title="&lt;&lt;C++11&gt;&gt; &lt;&lt;experimental&gt;&gt; &lt;&lt;extension&gt;&gt; Retrieves all the values of a DynamicData object into an std...">rti::core::xtypes::get_tuple</a>&lt;</div>
<div class="line">                int32_t, double, <a class="code" href="group__DDSCPP2SupportingTypes.html#gad310659fde3bf0bf1bf71a0a50abbfa2" title="A string convertible to std::string and with similar functionality.">std::string</a>&gt;(sample.data());</div>
<div class="line"></div>
<div class="line">            std::cout &lt;&lt; std::get&lt;0&gt;(my_tuple) &lt;&lt; std::endl;</div>
<div class="line">            std::cout &lt;&lt; std::get&lt;1&gt;(my_tuple) &lt;&lt; std::endl;</div>
<div class="line">            std::cout &lt;&lt; std::get&lt;2&gt;(my_tuple) &lt;&lt; std::endl;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Connext Modern C++ API Version 5.2.3</A>
Copyright &copy; Wed Apr 27 2016 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
