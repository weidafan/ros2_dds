<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RTI Connext .Net APIs: DDS::ShmemTransport Interface Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RTI Connext .Net APIs
   &#160;<span id="projectnumber">Version 5.2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2-20120808 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('interfaceDDS_1_1ShmemTransport.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DDS::ShmemTransport Interface Reference<div class="ingroups"><a class="el" href="group__NDDS__TransportBuiltinsComponent.html">Built-in Transport Plugins</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Built-in transport plug-in for inter-process communications using shared memory.  
 <a href="interfaceDDS_1_1ShmemTransport.html#details">More...</a></p>

<p><code>#include &lt;managed_transport.h&gt;</code></p>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Built-in transport plug-in for inter-process communications using shared memory. </p>
<p>This plugin uses System Shared Memory to send messages between processes on the same node. </p>
<p>The transport plugin has exactly one "receive interface"; since the <code>address_bit_count</code> is 0, it can be assigned any address. Thus the interface is located by the "network address" associated with the transport plugin. </p>
<h1><a class="anchor" id="ShmemTransport_compatibility"></a>
Compatibility of Sender and Receiver Transports</h1>
<p>Opening a receiver "port" on shared memory corresponds to creating a shared memory segment using a name based on the port number. The transport plugin's properties are embedded in the shared memory segment. </p>
<p>When a sender tries to send to the shared memory port, it verifies that properties of the receiver's shared memory transport are compatible with those specified in its transport plugin. If not, the sender will fail to attach to the port and will output messages such as below (with numbers appropriate to the properties of the transport plugins involved). </p>
<pre class="fragment">  NDDS_Transport_Shmem_attachShmem:failed to initialize incompatible properties
  NDDS_Transport_Shmem_attachShmem:countMax 0 &gt; -19417345 or max size -19416188 &gt; 2147482624              </pre><p> In this scenario, the properties of the sender or receiver transport plugin instances should be adjusted, so that they are compatible. </p>
<h1><a class="anchor" id="ShmemTransport_crash"></a>
Crashing and Restarting Programs</h1>
<p>If a process using shared memory crashes (say because the user typed in ^C), resources associated with its shared memory ports may not be properly cleaned up. Later, if another <a class="el" href="namespaceRTI.html">RTI</a> Connext process needs to open the same ports (say, the crashed program is restarted), it will attempt to reuse the shared memory segment left behind by the crashed process. </p>
<p>The reuse is allowed iff the properties of transport plugin are compatible with those embedded in the shared memory segment (i.e., of the original creator). Otherwise, the process will fail to open the ports, and will output messages such as below (with numbers appropriate to the properties of the transport plugins involved). </p>
<pre class="fragment">  NDDS_Transport_Shmem_create_recvresource_rrEA:failed to initialize shared 
        memory resource Cannot recycle existing shmem: size not compatible for key 0x1234                 </pre><p> In this scenario, the shared memory segments must be cleaned up using appropriate platform specific commands. For details, please refer to the <a href="../../../manuals/connext_dds/RTI_ConnextDDS_CoreLibraries_PlatformNotes.pdf" target="_blank">Platform Notes</a>. </p>
<h1><a class="anchor" id="ShmemTransport_keys"></a>
Shared Resource Keys</h1>
<p>The transport uses the <b>shared</b> <b>memory</b> <b>segment</b> <b>keys</b>, given by the formula below. </p>
<div class="fragment"><div class="line">0x400000 + port                 </div>
</div><!-- fragment --><p> The transport also uses signaling <b>shared</b> <b>semaphore</b> <b>keys</b> given by the formula below. </p>
<div class="fragment"><div class="line">0x800000 + port                 </div>
</div><!-- fragment --><p> The transport also uses mutex <b>shared</b> <b>semaphore</b> <b>keys</b> given by the formula below. </p>
<div class="fragment"><div class="line">0xb00000 + port                 </div>
</div><!-- fragment --><p> wher the <code>port</code> is a function of the <code>domain_id</code> and the <code>participant_id</code>, as described in <a class="el" href="structDDS_1_1WireProtocolQosPolicy.html#a85070480156092d2d88f817beb57856e" title="A value used to distinguish among different participants belonging to the same domain on the same hos...">DDS::WireProtocolQosPolicy::participant_id</a> </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="structDDS_1_1WireProtocolQosPolicy.html#a85070480156092d2d88f817beb57856e" title="A value used to distinguish among different participants belonging to the same domain on the same hos...">DDS::WireProtocolQosPolicy::participant_id</a> </dd></dl>
<h1><a class="anchor" id="ShmemTransport_register"></a>
Creating and Registering Shared Memory Transport Plugin</h1>
<p><a class="el" href="namespaceRTI.html">RTI</a> Connext can implicitly create this plugin and register with the <a class="el" href="classDDS_1_1DomainParticipant.html" title="&lt;&lt;interface&gt;&gt; Container for all DDS::DomainEntity objects.">DDS::DomainParticipant</a> if this transport is specified in <a class="el" href="structDDS_1_1TransportBuiltinQosPolicy.html" title="Specifies which built-in transports are used.">DDS::TransportBuiltinQosPolicy</a>. </p>
<p>To specify the properties of the builtin shared memory transport that is implicitly registered, you can specify the pre-defined property names in <a class="el" href="classDDS_1_1PropertyQosPolicy.html" title="Stores name/value(string) pairs that can be used to configure certain parameters of RTI Connext that ...">DDS::PropertyQosPolicy</a> associated with the <a class="el" href="classDDS_1_1DomainParticipant.html" title="&lt;&lt;interface&gt;&gt; Container for all DDS::DomainEntity objects.">DDS::DomainParticipant</a>. (see <a class="el" href="interfaceDDS_1_1ShmemTransport.html#TransportSHMEMPropertyNameModule">Shared Memory Transport Property Names in Property QoS Policy of Domain Participant</a>). </p>
<p>The default value is assumed on any unspecified property. Note that all properties should be set before the transport is implicitly created and registered by <a class="el" href="namespaceRTI.html">RTI</a> Connext. See <a class="el" href="group__NDDS__TransportBuiltinsComponent.html">Built-in Transport Plugins</a> for details on when a builtin transport is registered. </p>
<h1><a class="anchor" id="TransportSHMEMPropertyNameModule"></a>
Shared Memory Transport Property Names in Property QoS Policy of Domain Participant</h1>
<p>The following table lists the predefined property names that can be set in the <a class="el" href="classDDS_1_1PropertyQosPolicy.html" title="Stores name/value(string) pairs that can be used to configure certain parameters of RTI Connext that ...">DDS::PropertyQosPolicy</a> of a <a class="el" href="classDDS_1_1DomainParticipant.html" title="&lt;&lt;interface&gt;&gt; Container for all DDS::DomainEntity objects.">DDS::DomainParticipant</a> to configure the builtin shared memory transport plugin. </p>
<center> <table class="doxtable">
<caption align="bottom"><em>Property Strings for Shared Memory Transport</em></caption>
<tr>
<th><b> Name </b>  </th><th><p class="starttd"><b> Descriptions </b>  </p>
<p></p>
<p class="endtd"></p>
</th></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.address_bit_count </td><td>See ::DDS::Transport_Property_t::address_bit_count  </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.properties_bitmap </td><td>See ::DDS::Transport_Property_t::properties_bitmap  </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.gather_send_buffer_count_max </td><td>See ::DDS::Transport_Property_t::gather_send_buffer_count_max  </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.message_size_max </td><td>See ::DDS::Transport_Property_t::message_size_max  </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.allow_interfaces </td><td>See ::DDS::Transport_Property_t::allow_interfaces_list and ::DDS::Transport_Property_t::allow_interfaces_list_length. <br/>
 Interfaces should be specified as comma-separated strings, with each comma delimiting an interface. For example: 127.0.0.1,eth0   </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.deny_interfaces </td><td>See ::DDS::Transport_Property_t::deny_interfaces_list and ::DDS::Transport_Property_t::deny_interfaces_list_length. <br/>
 Interfaces should be specified as comma-separated strings, with each comma delimiting an interface. For example: 127.0.0.1,eth0   </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.allow_multicast_interfaces </td><td>See ::DDS::Transport_Property_t::allow_multicast_interfaces_list and ::DDS::Transport_Property_t::allow_multicast_interfaces_list_length. <br/>
 Interfaces should be specified as comma-separated strings, with each comma delimiting an interface. For example: 127.0.0.1,eth0   </td></tr>
<tr>
<td>dds.transport.shmem.builtin.parent.deny_multicast_interfaces </td><td>See ::DDS::Transport_Property_t::deny_multicast_interfaces_list and ::DDS::Transport_Property_t::deny_multicast_interfaces_list_length. Interfaces should be specified as comma-separated strings, with each comma delimiting an interface. For example: 127.0.0.1,eth0   </td></tr>
<tr>
<td>dds.transport.shmem.builtin.received_message_count_max </td><td>See ::DDS::ShmemTransport_Property_t::received_message_count_max  </td></tr>
<tr>
<td>dds.transport.shmem.builtin.receive_buffer_size </td><td><p class="starttd">See ::DDS::ShmemTransport_Property_t::receive_buffer_size  </p>
<p></p>
<p class="endtd"></p>
</td></tr>
</table>
</center> </div></div><!-- contents -->
</div><!-- doc-content -->
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Connext .Net APIs Version 5.2.3</A>
Copyright &copy; Wed Apr 27 2016 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
