<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RTI Connext .Net APIs: Filter Use Cases</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RTI Connext .Net APIs
   &#160;<span id="projectnumber">Version 5.2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2-20120808 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__NDDSFilterExampleModule.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Filter Use Cases</div>  </div>
<div class="ingroups"><a class="el" href="group__DDSHowToModule.html">Programming How-To's</a></div></div><!--header-->
<div class="contents">

<p>Working with data filters.  
<a href="#details">More...</a></p>
<p>Working with data filters. </p>
<h1><a class="anchor" id="NDDSFilterExampleModule_intro"></a>
Introduction</h1>
<p><a class="el" href="namespaceRTI.html">RTI</a> Connext supports filtering data either during the exchange from <a class="el" href="classDDS_1_1DataWriter.html" title="&lt;&lt;interface&gt;&gt; Allows an application to set the value of the data to be published under a given DDS::T...">DDS::DataWriter</a> to <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a>, or after the data has been stored at the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a>.</p>
<p>Filtering during the exchange process is performed by a <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a>, which is created by the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> as a way of specifying a subset of the data samples that it wishes to receive.</p>
<p>Filtering samples that have already been received by the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> is performed by creating a <a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a>, which can then used to check for matching samples, be alerted when matching samples arrive, or retrieve matching samples through use of the <a class="el" href="classDDS_1_1TypedDataReader.html#aee0fd6c2df88f6e6c83821a42a727862" title="Accesses via DDS::TypedDataReader::read the samples that match the criteria specified in the DDS::Rea...">DDS::TypedDataReader::read_w_condition</a> or <a class="el" href="classDDS_1_1TypedDataReader.html#a6d0599f5d54e90a06a58d7f7a66700bb" title="Analogous to DDS::TypedDataReader::read_w_condition except it accesses samples via the DDS::TypedData...">DDS::TypedDataReader::take_w_condition</a> functions. (Conditions may also be used with the APIs <a class="el" href="classDDS_1_1TypedDataReader.html#a7c37f166ef6ae6dcc338c71df4adb111" title="Accesses via DDS::TypedDataReader::read_next_instance the samples that match the criteria specified i...">DDS::TypedDataReader::read_next_instance_w_condition</a> and <a class="el" href="classDDS_1_1TypedDataReader.html#aeb36a9888c9cbabe1b53042077339d73" title="Accesses via DDS::TypedDataReader::take_next_instance the samples that match the criteria specified i...">DDS::TypedDataReader::take_next_instance_w_condition</a>.)</p>
<p>Filtering may be performed on any topic, either keyed or un-keyed, except the <a class="el" href="group__DDSBuiltInTopicModule.html">Built-in Topics</a>. Filtering may be perfomed on any field, subset of fields, or combination of fields, subject only to the limitations of the filter syntax, and some restrictions against filtering some <em>sparse value types</em> of the <a class="el" href="group__DDSDynamicDataModule.html">Dynamic Data</a> API.</p>
<p><a class="el" href="namespaceRTI.html">RTI</a> Connext contains built in support for filtering using SQL syntax, described in the <a class="el" href="group__DDSQueryAndFilterSyntaxModule.html">Queries and Filters Syntax</a> module.</p>
<h2><a class="anchor" id="NDDSFilterExampleModule_CFT_overview"></a>
Overview of ContentFilteredTopic</h2>
<p>Each <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a> is created based on an existing <a class="el" href="classDDS_1_1Topic.html" title="&lt;&lt;interface&gt;&gt; The most basic description of the data to be published and subscribed.">DDS::Topic</a>. The <a class="el" href="classDDS_1_1Topic.html" title="&lt;&lt;interface&gt;&gt; The most basic description of the data to be published and subscribed.">DDS::Topic</a> specifies the <b>field_names</b> and <b>field_types</b> of the data contained within the topic. The <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a>, by means of its <code>filter_expression</code> and <code>expression_parameters</code>, futher specifies the <em>values</em> of the data which the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> wishes to receive.</p>
<p>Once the <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a> has been created, a <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> can be created using the filtered topic. The filter's characteristics are exchanged between the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> and any matching <a class="el" href="classDDS_1_1DataWriter.html" title="&lt;&lt;interface&gt;&gt; Allows an application to set the value of the data to be published under a given DDS::T...">DDS::DataWriter</a> during the discovery processs.</p>
<p>If the <a class="el" href="classDDS_1_1DataWriter.html" title="&lt;&lt;interface&gt;&gt; Allows an application to set the value of the data to be published under a given DDS::T...">DDS::DataWriter</a> allows (by <a class="el" href="structDDS_1_1DataWriterResourceLimitsQosPolicy.html#a023afe92c76a02dd8e31293b3d002d92" title="The maximum number of remote DataReaders for which the DDS::DataWriter will perform content-based fil...">DDS::DataWriterResourceLimitsQosPolicy::max_remote_reader_filters</a>) and the number of filtered <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> is less than or equal to 32, and the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> 's <a class="el" href="classDDS_1_1TransportMulticastQosPolicy.html" title="Specifies the multicast address on which a DDS::DataReader wants to receive its data. It can also specify a port number as well as a subset of the available (at the DDS::DomainParticipant level) transports with which to receive the multicast data.">DDS::TransportMulticastQosPolicy</a> is empty, then the <a class="el" href="classDDS_1_1DataWriter.html" title="&lt;&lt;interface&gt;&gt; Allows an application to set the value of the data to be published under a given DDS::T...">DDS::DataWriter</a> will performing filtering and send to the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> only those samples that meet the filtering criteria.</p>
<p>If disallowed by the <a class="el" href="classDDS_1_1DataWriter.html" title="&lt;&lt;interface&gt;&gt; Allows an application to set the value of the data to be published under a given DDS::T...">DDS::DataWriter</a>, or if more than 32 <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> require filtering, or the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> has set the <a class="el" href="classDDS_1_1TransportMulticastQosPolicy.html" title="Specifies the multicast address on which a DDS::DataReader wants to receive its data. It can also specify a port number as well as a subset of the available (at the DDS::DomainParticipant level) transports with which to receive the multicast data.">DDS::TransportMulticastQosPolicy</a>, then the <a class="el" href="classDDS_1_1DataWriter.html" title="&lt;&lt;interface&gt;&gt; Allows an application to set the value of the data to be published under a given DDS::T...">DDS::DataWriter</a> sends all samples to the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a>, and the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> discards any samples that do not meet the filtering criteria.</p>
<p>Although the <code>filter_expression</code> cannot be changed once the <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a> has been created, the <code>expression_parameters</code> can be modified using <a class="el" href="classDDS_1_1ContentFilteredTopic.html#a91900c59e1cd1b4e4e21967e7527909a" title="Set the expression_parameters.">DDS::ContentFilteredTopic::set_expression_parameters</a>. Any changes made to the filtering criteria by means of <a class="el" href="classDDS_1_1ContentFilteredTopic.html#a91900c59e1cd1b4e4e21967e7527909a" title="Set the expression_parameters.">DDS::ContentFilteredTopic::set_expression_parameters</a>, will be conveyed to any connected <a class="el" href="classDDS_1_1DataWriter.html" title="&lt;&lt;interface&gt;&gt; Allows an application to set the value of the data to be published under a given DDS::T...">DDS::DataWriter</a>. New samples will be subject to the modified filtering criteria, but samples that have already been accepted or rejected are unaffected. However, if the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> connects to a <a class="el" href="classDDS_1_1DataWriter.html" title="&lt;&lt;interface&gt;&gt; Allows an application to set the value of the data to be published under a given DDS::T...">DDS::DataWriter</a> that <em>re-sends</em> its data, the re-sent samples will be subjected to the new filtering criteria.</p>
<h2><a class="anchor" id="NDDSFilterExampleModule_QC_overview"></a>
Overview of QueryCondition</h2>
<p><a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a> combine aspects of the content filtering capabilities of <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a> with state filtering capabilities of <a class="el" href="classDDS_1_1ReadCondition.html" title="&lt;&lt;interface&gt;&gt; Conditions specifically dedicated to read operations and attached to one DDS::DataReade...">DDS::ReadCondition</a> to create a reconfigurable means of filtering or searching data in the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> queue.</p>
<p><a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a> may be created on a disabled <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a>, or after the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> has been enabled. If the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> is enabled, and has already recevied and stored samples in its queue, then all data samples in the are filtered against the <a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a> filter criteria at the time that the <a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a> is created. (Note that an exclusive lock is held on the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> sample queue for the duration of the <a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a> creation).</p>
<p>Once created, incoming samples are filtered against all <a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a> filter criteria at the time of their arrival and storage into the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> queue.</p>
<p>The number of <a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a> filters that an individual <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> may create is set by <a class="el" href="structDDS_1_1DataReaderResourceLimitsQosPolicy.html#a77c411b590dc8a1294b014815a42ebab" title="The maximum number of query condition filters a reader is allowed.">DDS::DataReaderResourceLimitsQosPolicy::max_query_condition_filters</a>, to an upper maximum of 32.</p>
<h1><a class="anchor" id="NDDSFilterExampleModule_content_filtered_topic"></a>
Filtering with ContentFilteredTopic</h1>
<ul>
<li><a class="el" href="group__DDSSubscriberExampleModule.html#DDSSubscriberExampleModule_subscriber_setup">Set up subscriber</a></li>
</ul>
<ul>
<li><a class="el" href="group__DDSTopicExampleModule.html#DDSTopicExampleModule_setup">Set up a topic</a></li>
</ul>
<ul>
<li>Create a ContentFilteredTopic, of user data type <code><a class="el" href="classFoo.html" title="A representative user-defined data type.">Foo</a>:</code> <div class="fragment"><div class="line">String cft_param_list[] = {<span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;100&quot;</span>};</div>
<div class="line">StringSeq cft_parameters = <span class="keyword">new</span> StringSeq(java.util.Arrays.asList(cft_param_list));</div>
<div class="line"></div>
<div class="line">ContentFilteredTopic cft = participant.create_contentfilteredtopic(</div>
<div class="line">                                <span class="stringliteral">&quot;ContentFilteredTopic&quot;</span>,</div>
<div class="line">                                topic,</div>
<div class="line">                                <span class="stringliteral">&quot;value &gt; %0 AND value &lt; %1&quot;</span>,</div>
<div class="line">                                cft_parameters);</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">if</span> (cft == null) {</div>
<div class="line">    System.err.println(<span class="stringliteral">&quot;create_contentfilteredtopic error\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}                     </div>
</div><!-- fragment --></li>
</ul>
<ul>
<li>Create a FooReader using the ContentFilteredTopic: <div class="fragment"><div class="line"><a class="code" href="classFooDataReader.html" title="&lt;&lt;interface&gt;&gt; &lt;&lt;generic&gt;&gt; User data type-specific data reader.">FooDataReader</a> reader = (<a class="code" href="classFooDataReader.html" title="&lt;&lt;interface&gt;&gt; &lt;&lt;generic&gt;&gt; User data type-specific data reader.">FooDataReader</a>)</div>
<div class="line">                           subscriber.create_datareader(</div>
<div class="line">                               cft,</div>
<div class="line">                               datareader_qos, <span class="comment">// or Subscriber.DATAREADER_QOS_DEFAULT //</span></div>
<div class="line">                               listener, <span class="comment">// or null //</span></div>
<div class="line">                               <a class="code" href="group__DDSStatusTypesModule.html#gabb7ed73d2f725f84245a12a9fffbf1ce" title="Type for status kinds.">StatusKind</a>.STATUS_MASK_ALL);</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span> (reader == null) {</div>
<div class="line">    System.err.println(<span class="stringliteral">&quot;create_datareader error\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}                         </div>
</div><!-- fragment --> Once setup, reading samples with a <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a> is exactly the same as normal reads or takes, as decribed in <a class="el" href="group__DDSReaderExampleModule.html">DataReader Use Cases</a>.</li>
</ul>
<ul>
<li>Changing filter crieria using set_expression_parameters: <div class="fragment"><div class="line">cft_parameters.set(0, <span class="stringliteral">&quot;5&quot;</span>);</div>
<div class="line">cft_parameters.set(1, <span class="stringliteral">&quot;9&quot;</span>);</div>
<div class="line">cft.set_expression_parameters(cft_parameters);</div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="NDDSFilterExampleModule_query_conditions"></a>
Filtering with Query Conditions</h1>
<ul>
<li>Given a data reader of type <a class="el" href="classFoo.html" title="A representative user-defined data type.">Foo</a> <div class="fragment"><div class="line"><a class="code" href="classFooDataReader.html" title="&lt;&lt;interface&gt;&gt; &lt;&lt;generic&gt;&gt; User data type-specific data reader.">FooDataReader</a> reader = ...;</div>
</div><!-- fragment --></li>
</ul>
<ul>
<li>Creating a QueryCondition <div class="fragment"><div class="line">QueryCondition queryCondition = null;</div>
<div class="line">String qc_param_list[] = {<span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;100&quot;</span>};</div>
<div class="line"></div>
<div class="line">StringSeq qc_parameters = <span class="keyword">new</span> StringSeq(java.util.Arrays.asList(cft_param_list));</div>
<div class="line">queryCondition = reader.<a class="code" href="classDDS_1_1DataReader.html#a170bd369a2d7a8500b7005233f9c0a30" title="Creates a DDS::QueryCondition.">create_querycondition</a>(SampleStateKind.NOT_READ_SAMPLE_STATE,</div>
<div class="line">                                              ViewStateKind.ANY_VIEW_STATE,</div>
<div class="line">                                              InstanceStateKind.ANY_INSTANCE_STATE,</div>
<div class="line">                                              <span class="stringliteral">&quot;value &gt; %0 AND value &lt; %1&quot;</span>,</div>
<div class="line">                                              qc_parameters);</div>
<div class="line"><span class="keywordflow">if</span> (queryCondition == null) {</div>
<div class="line">    System.err.println(<span class="stringliteral">&quot;create_querycondition error\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
<ul>
<li>Reading matching samples with a <a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a> <div class="fragment"><div class="line"><a class="code" href="classFooSeq.html" title="&lt;&lt;interface&gt;&gt; &lt;&lt;generic&gt;&gt; A type-safe, ordered collection of elements. The type of these elements is ...">FooSeq</a> _dataSeq = <span class="keyword">new</span> <a class="code" href="classFooSeq.html" title="&lt;&lt;interface&gt;&gt; &lt;&lt;generic&gt;&gt; A type-safe, ordered collection of elements. The type of these elements is ...">FooSeq</a>();</div>
<div class="line">SampleInfoSeq _infoSeq = <span class="keyword">new</span> SampleInfoSeq();</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">try</span> {</div>
<div class="line">    reader.<a class="code" href="classDDS_1_1TypedDataReader.html#aee0fd6c2df88f6e6c83821a42a727862" title="Accesses via DDS::TypedDataReader::read the samples that match the criteria specified in the DDS::Rea...">read_w_condition</a>(_dataSeq, _infoSeq,</div>
<div class="line">                            ResourceLimitsQosPolicy.LENGTH_UNLIMITED,</div>
<div class="line">                            queryCondition);</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; _dataSeq.size(); ++i) {</div>
<div class="line">        SampleInfo info = (SampleInfo)_infoSeq.get(i);</div>
<div class="line">        <span class="keywordflow">if</span> (info.valid_data) {</div>
<div class="line">            <span class="comment">// --- Process data here --- //</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">} <span class="keywordflow">catch</span> (RETCODE_NO_DATA noData) {</div>
<div class="line">    <span class="comment">// No data to process</span></div>
<div class="line">} <span class="keywordflow">finally</span> {</div>
<div class="line">    reader.<a class="code" href="classDDS_1_1TypedDataReader.html#a57af270af1e041de951f959d2d255735" title="Indicates to the DDS::DataReader that the application is done accessing the collection of received_da...">return_loan</a>(_dataSeq, _infoSeq);</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
<ul>
<li><a class="el" href="classDDS_1_1QueryCondition.html#a21d5f59d3142f740ddcf94c81f056c25" title="Sets the query parameters.">DDS::QueryCondition::set_query_parameters</a> is used similarly to <a class="el" href="classDDS_1_1ContentFilteredTopic.html#a91900c59e1cd1b4e4e21967e7527909a" title="Set the expression_parameters.">DDS::ContentFilteredTopic::set_expression_parameters</a>, and the same coding techniques can be used.</li>
</ul>
<ul>
<li>Any <a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a> that have been created must be deleted before the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> can be deleted. This can be done using <a class="el" href="classDDS_1_1DataReader.html#acd524d0167af98ae4f526c2e6b83a755" title="Deletes all the entities that were created by means of the &quot;create&quot; operations on the DDS::DataReader...">DDS::DataReader::delete_contained_entities</a> or manually as in: <div class="fragment"><div class="line">retcode = reader.<a class="code" href="classDDS_1_1DataReader.html#af44967d6335e2522a50cd0f83e8e4110" title="Deletes a DDS::ReadCondition or DDS::QueryCondition attached to the DDS::DataReader.">delete_readcondition</a>(queryCondition);</div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="NDDSFilterExampleModule_performance"></a>
Filtering Performance</h1>
<p>Although <a class="el" href="namespaceRTI.html">RTI</a> Connext supports filtering on any field or combination of fields using the SQL syntax of the built-in filter, filters for keyed topics that filter solely on the contents of key fields have the potential for much higher performance. This is because for key field only filters, the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a> caches the results of the filter (pass or not pass) for each instance. When another sample of the same instance is seen at the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a>, the filter results are retrieved from cache, dispensing with the need to call the filter function.</p>
<p>This optimization applies to all filtering using the built-in SQL filter, performed by the <a class="el" href="classDDS_1_1DataReader.html" title="&lt;&lt;interface&gt;&gt; Allows the application to: (1) declare the data it wishes to receive (i...">DDS::DataReader</a>, for either <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a> or <a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a>. This does <em>not</em> apply to filtering perfomed for <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a> by the <a class="el" href="classDDS_1_1DataWriter.html" title="&lt;&lt;interface&gt;&gt; Allows an application to set the value of the data to be published under a given DDS::T...">DDS::DataWriter</a>. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Connext .Net APIs Version 5.2.3</A>
Copyright &copy; Wed Apr 27 2016 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
