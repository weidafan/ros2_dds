<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>RTI Connext .Net APIs: Queries and Filters Syntax</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RTI Connext .Net APIs
   &#160;<span id="projectnumber">Version 5.2.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2-20120808 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__DDSQueryAndFilterSyntaxModule.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Queries and Filters Syntax</div>  </div>
<div class="ingroups"><a class="el" href="group__DDSDcpsModule.html">RTI Connext DDS API Reference</a></div></div><!--header-->
<div class="contents">
<h1><a class="anchor" id="query_and_filter_syntax"></a>
Syntax for DDS Queries and Filters</h1>
<p>A subset of SQL syntax is used in several parts of the specification:</p>
<ul>
<li>The <code>filter_expression</code> in the <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a> </li>
<li>The <code>query_expression</code> in the <a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a> </li>
<li>The <code>topic_expression</code> in the <a class="el" href="classDDS_1_1MultiTopic.html" title="[Not supported (optional)] &lt;&lt;interface&gt;&gt; A specialization of ::DDS::TopicDescription that allows subs...">DDS::MultiTopic</a></li>
</ul>
<p>Those expressions may use a subset of SQL, extended with the possibility to use program variables in the SQL expression. The allowed SQL expressions are defined with the BNF-grammar below.</p>
<p>The following notational conventions are made: </p>
<ul>
<li><em>NonTerminals</em> are typeset in italics. </li>
<li><code>'Terminals'</code> are quoted and typeset in a fixed width font. They are written in upper case in most cases in the BNF-grammar below, but should be case insensitive. </li>
<li><b>TOKENS</b> are typeset in bold. </li>
<li>The notation (<em>element</em> // ',') represents a non-empty comma-separated list of <em>elements</em>.</li>
</ul>
<h1><a class="anchor" id="sql_grammar_in_BNF"></a>
SQL grammar in BNF</h1>
<pre>
<em>Expression</em> ::= <em>FilterExpression</em>
           |   <em>TopicExpression</em>
           |   <em>QueryExpression</em>
           <b>.</b> 
<em>FilterExpression</em> ::= <em>Condition</em>
<em>TopicExpression</em>  ::= <em>SelectFrom</em> { <em>Where</em> } ';'
<em>QueryExpression</em>  ::= { <em>Condition</em> }{ <code>'ORDER BY'</code> (<b>FIELDNAME</b> // ',') }
                     <b>.</b></pre><pre><em>SelectFrom</em>       ::= <code>'SELECT'</code> <em>Aggregation</em> <code>'FROM'</code> <em>Selection</em>
                 <b>.</b>
<em>Aggregation</em>      ::= <code>'*'</code>
                 |   (<em>SubjectFieldSpec</em> // ',')
                 <b>.</b>
<em>SubjectFieldSpec</em> ::= <b>FIELDNAME</b>
                 |   <b>FIELDNAME</b> <code>'AS'</code> <b>IDENTIFIER</b>
                 |   <b>FIELDNAME</b> <b>IDENTIFIER</b>
                 <b>.</b>
<em>Selection</em>   ::= <b>TOPICNAME</b>
            |   <b>TOPICNAME</b> <em>NaturalJoin</em> <em>JoinItem</em>
            <b>.</b>
<em>JoinItem</em>    ::= <b>TOPICNAME</b>
            |   <b>TOPICNAME</b> <em>NaturalJoin</em> <em>JoinItem</em>
            |   <code>'('</code> <b>TOPICNAME</b> <em>NaturalJoin</em> <em>JoinItem</em> <code>')'</code>
            <b>.</b>
<em>NaturalJoin</em> ::= <code>'INNER JOIN'</code>
            |   <code>'INNER NATURAL JOIN'</code>
            |   <code>'NATURAL JOIN'</code>
            |   <code>'NATURAL INNER JOIN'</code>
            <b>.</b>
<em>Where</em>       ::= <code>'WHERE'</code> <em>Condition</em>
            <b>.</b>
<em>Condition</em>   ::= <em>Predicate</em>
            |   <em>Condition</em> <code>'AND'</code> <em>Condition</em>
            |   <em>Condition</em> <code>'OR'</code> <em>Condition</em>
            |   <code>'NOT'</code> <em>Condition</em>
            |   <code>'('</code> <em>Condition</em> <code>')'</code>
            <b>.</b>
<em>Predicate</em>   ::= <em>ComparisonPredicate</em>
            |   <em>BetweenPredicate</em>
            <b>.</b>
<em>ComparisonPredicate</em> ::= <em>ComparisonTerm</em> <em>RelOp</em> <em>ComparisonTerm</em>
                    <b>.</b>
<em>ComparisonTerm</em>      ::= <b>FieldIdentifier</b>
                    | <em>Parameter</em>
                    <b>.</b>
<em>BetweenPredicate</em>    ::= <em>FieldIdentifier</em> <code>'BETWEEN'</code> <em>Range</em>
                    |   <em>FieldIdentifier</em> <code>'NOT BETWEEN'</code> <em>Range</em>
                    <b>.</b>
<em>FieldIdentifier</em>      ::= <b>FIELDNAME</b>
                    | <b>IDENTIFIER</b>
                    <b>.</b>
<em>RelOp</em>     ::= <code>'='</code> | <code>'&gt;'</code> | <code>'&gt;='</code> | <code>'&lt;'</code> | <code>'&lt;='</code> | <code>'&lt;&gt;'</code> | <code>'LIKE'</code> | <code>'MATCH'</code>
          <b>.</b>
<em>Range</em>     ::= <em>Parameter</em> <code>'AND'</code> <em>Parameter</em>
          <b>.</b>
<em>Parameter</em> ::= <b>INTEGERVALUE</b>
          |   <b>CHARVALUE</b>
          |   <b>FLOATVALUE</b>
          |   <b>STRING</b>
          |   <b>ENUMERATEDVALUE</b>
          |   <b>BOOLEANVALUE</b>
          |   <b>PARAMETER</b>
          <b>.</b>
</pre><p><b>Note</b> &ndash; INNER JOIN, INNER NATURAL JOIN, NATURAL JOIN, and NATURAL INNER JOIN are all aliases, in the sense that they have the same semantics. They are all supported because they all are part of the SQL standard.</p>
<h1><a class="anchor" id="token_expression"></a>
Token expression</h1>
<p>The syntax and meaning of the tokens used in the SQL grammar is described as follows:</p>
<ul>
<li><b>IDENTIFIER</b> - An identifier for a FIELDNAME, and is defined as any series of characters 'a', ..., 'z', 'A', ..., 'Z', '0', ..., '9', '_' but may not start with a digit.</li>
</ul>
<p>Formal notation: </p>
<pre>
      IDENTIFIER: <em>LETTER</em> (<em>PART_LETTER</em>)*
      where <em>LETTER</em>: [ "A"-"Z","_","a"-"z" ]
            <em>PART_LETTER</em>: [ "A"-"Z","_","a"-"z","0"-"9" ]
      </pre><ul>
<li><b>FIELDNAME</b> - A fieldname is a reference to a field in the data structure. The dot '.' is used to navigate through nested structures. The number of dots that may be used in a FIELDNAME is unlimited. The FIELDNAME can refer to fields at any depth in the data structure. The names of the field are those specified in the IDL definition of the corresponding structure, which may or may not match the fieldnames that appear on the language-specific (e.g., C/C++, Java) mapping of the structure. To reference to the <em>n</em>+1 element in an array or sequence, use the notation '[<em>n</em>]', where <em>n</em> is a natural number (zero included). FIELDNAME must resolve to a primitive IDL type; that is either boolean, octet, (unsigned) short, (unsigned) long, (unsigned) long long, float double, char, wchar, string, wstring, or enum.</li>
</ul>
<p>Formal notation: </p>
<pre>
      FIELDNAME: <em>FieldNamePart</em> ( "." <em>FieldNamePart</em> )*
      where <em>FieldNamePart</em> : <b>IDENTIFIER</b> ( "[" <em>Index</em> "]" )*
            <em>Index&gt;</em> : (["0"-"9"])+
                   | ["0x","0X"](["0"-"9", "A"-"F", "a"-"f"])+
      </pre><p>Primitive IDL types referenced by FIELDNAME are treated as different types in <em>Predicate</em> according to the following table:</p>
<table class="doxtable">
<tr>
<td><b>Predicate Data Type</b> </td><td><b>IDL Type</b>  </td></tr>
<tr>
<td>BOOLEANVALUE </td><td>boolean  </td></tr>
<tr>
<td>INTEGERVALUE </td><td>octet, (unsigned) short, (unsigned) long, (unsigned) long long   </td></tr>
<tr>
<td>FLOATVALUE </td><td>float, double  </td></tr>
<tr>
<td>CHARVALUE </td><td>char, wchar  </td></tr>
<tr>
<td>STRING </td><td>string, wstring  </td></tr>
<tr>
<td>ENUMERATEDVALUE </td><td>enum  </td></tr>
</table>
<ul>
<li><b>TOPICNAME</b> - A topic name is an identifier for a topic, and is defined as any series of characters 'a', ..., 'z', 'A', ..., 'Z', '0', ..., '9', '_' but may not start with a digit.</li>
</ul>
<p>Formal notation: </p>
<pre>
       TOPICNAME : <b>IDENTIFIER</b>
       </pre><ul>
<li><b>INTEGERVALUE</b> - Any series of digits, optionally preceded by a plus or minus sign, representing a decimal integer value within the range of the system. A hexadecimal number is preceded by 0x and must be a valid hexadecimal expression.</li>
</ul>
<p>Formal notation: </p>
<pre>
       INTEGERVALUE : (["+","-"])? (["0"-"9"])+ [("L","l")]?
                    | (["+","-"])? ["0x","0X"](["0"-"9", "A"-"F", "a"-"f"])+ [("L","l")]?
       </pre><ul>
<li><b>CHARVALUE</b> - A single character enclosed between single quotes. </li>
</ul>
<p>Formal notation:</p>
<pre>
       CHARVALUE : "'" (~["'"])? "'"
       </pre><ul>
<li><b>FLOATVALUE</b> - Any series of digits, optionally preceded by a plus or minus sign and optionally including a floating point ('.'). A power-of-ten expression may be postfixed, which has the syntax e<em>n</em> or E<em>n</em>, where <em>n</em> is a number, optionally preceded by a plus or minus sign.</li>
</ul>
<p>Formal notation: </p>
<pre>
      FLOATVALUE : (["+","-"])? (["0"-"9"])* (".")? (["0"-"9"])+ (<em>EXPONENT</em>)?
      where <em>EXPONENT</em>: ["e","E"] (["+","-"])? (["0"-"9"])+
      </pre><ul>
<li><b>STRING</b> - Any series of characters encapsulated in single quotes, except the single quote itself.</li>
</ul>
<p>Formal notation: </p>
<pre>
      STRING : "'" (~["'"])* "'"
      </pre><ul>
<li><b>ENUMERATEDVALUE</b> - An enumerated value is a reference to a value declared within an enumeration. Enumerated values consist of the name of the enumeration label enclosed in single quotes. The name used for the enumeration label must correspond to the label names specified in the IDL definition of the enumeration.</li>
</ul>
<p>Formal notation: </p>
<pre>
      ENUMERATEDVALUE : "'" ["A" - "Z", "a" - "z"] ["A" - "Z", "a" - "z", "_", "0" - "9"]* "'"
      </pre><ul>
<li><b>BOOLEANVALUE</b> - Can either be 'TRUE' or 'FALSE', case insensitive. </li>
</ul>
<p>Formal notation (case insensitive):</p>
<pre>
      BOOLEANVALUE : ["TRUE","FALSE"]
      </pre><ul>
<li><b>PARAMETER</b> - A parameter is of the form %<em>n</em>, where <em>n</em> represents a natural number (zero included) smaller than 100. It refers to the n + 1 <sup>th</sup> argument in the given context. Argument can only in primitive type value format. It cannot be a FIELDNAME.</li>
</ul>
<p>Formal notation: </p>
<pre>
      PARAMETER : "%" (["0"-"9"])+
      </pre><h1><a class="anchor" id="string_parameters"></a>
String Parameters</h1>
<p>Strings used as parameter values must contain the enclosing quotation marks (') within the parameter value, and not place the quotation marks within the expression statement. For example, the following expression is legal: </p>
<pre>" symbol MATCH %0 " with parameter 0 = " 'IBM' "</pre><p>whereas the following expression will not compile: </p>
<pre>" symbol MATCH '%0' " with parameter 0 = " IBM "</pre><h1><a class="anchor" id="type_compatibility"></a>
Type compatability in Predicate</h1>
<p>Only certain combination of type comparisons are valid in <em>Predicate</em>. The following table marked all the compatible pairs with 'YES':</p>
<table class="doxtable">
<tr>
<td></td><td><b>BOOLEANVALUE</b> </td><td><b>INTEGERVALUE</b> </td><td><b>FLOATVALUE</b> </td><td><b>CHARVALUE</b> </td><td><b>STRING</b> </td><td><b>ENUMERATEDVALUE</b>  </td></tr>
<tr>
<td><b>BOOLEAN</b> </td><td>YES </td><td></td><td></td><td></td><td></td><td></td></tr>
<tr>
<td><b>INTEGERVALUE</b> </td><td></td><td>YES </td><td>YES </td><td></td><td></td><td></td></tr>
<tr>
<td><b>FLOATVALUE</b> </td><td></td><td>YES </td><td>YES </td><td></td><td></td><td></td></tr>
<tr>
<td><b>CHARVALUE</b> </td><td></td><td></td><td></td><td>YES </td><td>YES </td><td>YES  </td></tr>
<tr>
<td><b>STRING</b> </td><td></td><td></td><td></td><td>YES </td><td>YES(*1) </td><td>YES  </td></tr>
<tr>
<td><b>ENUMERATEDVALUE</b> </td><td></td><td>YES </td><td></td><td>YES(*2) </td><td>YES(*2) </td><td>YES(*3)  </td></tr>
</table>
<ul>
<li>(*1) See <a class="el" href="group__DDSQueryAndFilterSyntaxModule.html#sql_extension">SQL Extension: Regular Expression Matching</a> </li>
<li>(*2) Because the formal notation of the Enumeration values, they are compatible with string and char literals, but they are not compatible with string or char variables, i.e., "MyEnum='EnumValue'" would be correct, but "MyEnum=MyString" is not allowed. </li>
<li>(*3) Only for same type Enums.</li>
</ul>
<h1><a class="anchor" id="sql_extension"></a>
SQL Extension: Regular Expression Matching</h1>
<p>The relational operator MATCH may only be used with string fields. The right-hand operator is a string <em>pattern</em>. A string pattern specifies a template that the left-hand field value must match. The characters ,/?*[]-^!% have special meanings.</p>
<p>MATCH is case-sensitive.</p>
<p>The pattern allows limited "wild card" matching under the following rules:</p>
<table class="doxtable">
<tr>
<td><b>Character</b> </td><td><b>Meaning</b> </td></tr>
<tr>
<td><b>,</b> </td><td>"," separates a list of alternate patterns. The field string is matched if it matches one or more of the patterns.  </td></tr>
<tr>
<td><b>/</b> </td><td>"/" in the pattern string matches a / in the field string. This character is used to separate a sequence of mandatory substrings.  </td></tr>
<tr>
<td><b>?</b> </td><td>"?" in the pattern string matches any single <em>non-special</em> characters in the field string.  </td></tr>
<tr>
<td><b>*</b> </td><td>"*" in the pattern string matches 0 or more <em>non-special</em> characters in field string.  </td></tr>
<tr>
<td><b>[<em>charlist</em>]</b> </td><td>Matches any one of the characters from the list of characters in <em>charlist</em>.  </td></tr>
<tr>
<td><b>[<em>s</em>-<em>e</em>]</b> </td><td>Matches any character any character from <em>s</em> to <em>e</em>, inclusive.  </td></tr>
<tr>
<td><b>%</b> </td><td>"%" is used to designate filter expressions parameters.  </td></tr>
<tr>
<td><b>[!<em>charlist</em>] or [^<em>charlist</em>]</b> </td><td>Matches any characters not in <em>charlist</em> (not supported).  </td></tr>
<tr>
<td><b>[!<em>s</em>-<em>e</em>] or [^<em>s</em>-<em>e</em>]</b> </td><td>Matches any characters not in the interval [s-e] (not supported).  </td></tr>
<tr>
<td><b>\</b> </td><td>Escape character for special characters (not supported)  </td></tr>
</table>
<p>The syntax is similar to the POSIX fnmatch syntax (1003.2-1992 section B.6). The MATCH syntax is also similar to the 'subject' strings of TIBCO Rendezvous.</p>
<h1><a class="anchor" id="query_and_filter_example"></a>
Examples</h1>
<p>Assuming Topic "Location" has as an associated type a structure with fields "flight_id, x, y, z", and Topic "FlightPlan" has as fields "flight_id, source, destination". The following are examples of using these expressions.</p>
<p><a class="el" href="namespaceExample.html">Example</a> of a <b>filter_expression</b> (for <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a>) or a <b>query_expression</b> (for <a class="el" href="classDDS_1_1QueryCondition.html" title="&lt;&lt;interface&gt;&gt; These are specialised DDS::ReadCondition objects that allow the application to also spe...">DDS::QueryCondition</a>):</p>
<ul>
<li><pre> "z &lt; 1000 AND x &lt; 23" </pre></li>
</ul>
<p>Examples of a <b>filter_expression</b> using <b>MATCH</b> (for <a class="el" href="classDDS_1_1ContentFilteredTopic.html" title="&lt;&lt;interface&gt;&gt; Specialization of ::DDS::TopicDescription that allows for content-based subscriptions...">DDS::ContentFilteredTopic</a>) operator:</p>
<ul>
<li><code> "symbol MATCH 'NASDAQ/GOOG'" </code> </li>
<li><code> "symbol MATCH 'NASDAQ/[A-M]*'" </code></li>
</ul>
<p><a class="el" href="namespaceExample.html">Example</a> of a <b>topic_expression</b> (for <a class="el" href="classDDS_1_1MultiTopic.html" title="[Not supported (optional)] &lt;&lt;interface&gt;&gt; A specialization of ::DDS::TopicDescription that allows subs...">DDS::MultiTopic</a> [<b>Not supported (optional)</b>]):</p>
<ul>
<li><pre> "SELECT flight_id, x, y, z AS height FROM 'Location' NATURAL JOIN
       'FlightPlan' WHERE height &lt; 1000 AND x &lt;23" </pre> </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<HR>
<IMG SRC="rti_logo.gif" height="16">
<A HREF="main.html">RTI Connext .Net APIs Version 5.2.3</A>
Copyright &copy; Wed Apr 27 2016 
<A HREF="http://www.rti.com">Real-Time Innovations, Inc</A>
</BODY>
</HTML>
